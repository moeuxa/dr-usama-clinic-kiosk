import{A as sr,B as Sd,C as Md,D as v,E as he,F as Z,G as Ks,H as Nd,I as ar,J as se,K as at,L as Ii,M as Xs,N as xd,O as hn,P as cr,Q as Ad,R as Rd,S as It,T as pe,a as fe,b as be,c as je,d as md,e as Di,f as yd,g as vd,h as p,i as fn,j as Ei,k as _d,l as Dd,m as K,n as Ed,o as Qs,p as wd,q as Ze,r as Cd,s as Id,t as wi,u as Y,v as bd,w as Td,x as Te,y as Ct,z as Ci}from"./chunk-KEL6HG67.js";var ea=null;var Js=1,kd=Symbol("SIGNAL");function L(e){let t=ea;return ea=e,t}function Pd(){return ea}var ta={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ev(e){if(!(sa(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Js)){if(!e.producerMustRecompute(e)&&!ra(e)){e.dirty=!1,e.lastCleanEpoch=Js;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Js}}function na(e){return e&&(e.nextProducerIndex=0),L(e)}function Od(e,t){if(L(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(sa(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)oa(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function ra(e){aa(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(ev(n),r!==n.version))return!0}return!1}function ia(e){if(aa(e),sa(e))for(let t=0;t<e.producerNode.length;t++)oa(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function oa(e,t){if(tv(e),e.liveConsumerNode.length===1&&nv(e))for(let r=0;r<e.producerNode.length;r++)oa(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];aa(i),i.producerIndexOfThis[r]=t}}function sa(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function aa(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function tv(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function nv(e){return e.producerNode!==void 0}function rv(){throw new Error}var iv=rv;function Fd(e){iv=e}function I(e){return typeof e=="function"}function pn(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bi=pn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ht(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ee=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(I(r))try{r()}catch(o){t=o instanceof bi?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ld(o)}catch(s){t=t??[],s instanceof bi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new bi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ld(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ht(n,t)}remove(t){let{_finalizers:n}=this;n&&Ht(n,t),t instanceof e&&t._removeParent(this)}};ee.EMPTY=(()=>{let e=new ee;return e.closed=!0,e})();var ca=ee.EMPTY;function Ti(e){return e instanceof ee||e&&"closed"in e&&I(e.remove)&&I(e.add)&&I(e.unsubscribe)}function Ld(e){I(e)?e():e.unsubscribe()}var Ve={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gn={setTimeout(e,t,...n){let{delegate:r}=gn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=gn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Si(e){gn.setTimeout(()=>{let{onUnhandledError:t}=Ve;if(t)t(e);else throw e})}function lr(){}var jd=la("C",void 0,void 0);function Vd(e){return la("E",void 0,e)}function Bd(e){return la("N",e,void 0)}function la(e,t,n){return{kind:e,value:t,error:n}}var $t=null;function mn(e){if(Ve.useDeprecatedSynchronousErrorHandling){let t=!$t;if(t&&($t={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=$t;if($t=null,n)throw r}}else e()}function Hd(e){Ve.useDeprecatedSynchronousErrorHandling&&$t&&($t.errorThrown=!0,$t.error=e)}var Ut=class extends ee{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ti(t)&&t.add(this)):this.destination=av}static create(t,n,r){return new ct(t,n,r)}next(t){this.isStopped?da(Bd(t),this):this._next(t)}error(t){this.isStopped?da(Vd(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?da(jd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ov=Function.prototype.bind;function ua(e,t){return ov.call(e,t)}var fa=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Mi(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Mi(r)}else Mi(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Mi(n)}}},ct=class extends Ut{constructor(t,n,r){super();let i;if(I(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ve.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&ua(t.next,o),error:t.error&&ua(t.error,o),complete:t.complete&&ua(t.complete,o)}):i=t}this.destination=new fa(i)}};function Mi(e){Ve.useDeprecatedSynchronousErrorHandling?Hd(e):Si(e)}function sv(e){throw e}function da(e,t){let{onStoppedNotification:n}=Ve;n&&gn.setTimeout(()=>n(e,t))}var av={closed:!0,next:lr,error:sv,complete:lr};var yn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Se(e){return e}function $d(e){return e.length===0?Se:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var z=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lv(n)?n:new ct(n,r,i);return mn(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Ud(r),new r((i,o)=>{let s=new ct({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[yn](){return this}pipe(...n){return $d(n)(this)}toPromise(n){return n=Ud(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Ud(e){var t;return(t=e??Ve.Promise)!==null&&t!==void 0?t:Promise}function cv(e){return e&&I(e.next)&&I(e.error)&&I(e.complete)}function lv(e){return e&&e instanceof Ut||cv(e)&&Ti(e)}function uv(e){return I(e?.lift)}function F(e){return t=>{if(uv(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(e,t,n,r,i){return new ha(e,t,n,r,i)}var ha=class extends Ut{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Wd=pn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=(()=>{class e extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ni(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Wd}next(n){mn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){mn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){mn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ca:(this.currentObservers=null,o.push(n),new ee(()=>{this.currentObservers=null,Ht(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new z;return n.source=this,n}}return e.create=(t,n)=>new Ni(t,n),e})(),Ni=class extends ge{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:ca}};var ur=class extends ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var dr={now(){return(dr.delegate||Date).now()},delegate:void 0};var xi=class extends ge{constructor(t=1/0,n=1/0,r=dr){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(t),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!t.closed;s+=r?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*t;if(t<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ai=class extends ee{constructor(t,n){super()}schedule(t,n=0){return this}};var fr={setInterval(e,t,...n){let{delegate:r}=fr;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=fr;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var vn=class extends Ai{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return fr.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fr.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ht(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var _n=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};_n.now=dr.now;var Dn=class extends _n{constructor(t,n=_n.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var hr=new Dn(vn);var Ri=class extends vn{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}};var ki=class extends Dn{};var pa=new ki(Ri);var Pi=new z(e=>e.complete());function zd(e){return e&&I(e.schedule)}function ga(e){return e[e.length-1]}function Gd(e){return I(ga(e))?e.pop():void 0}function Oi(e){return zd(ga(e))?e.pop():void 0}function qd(e,t){return typeof ga(e)=="number"?e.pop():t}var Fi=e=>e&&typeof e.length=="number"&&typeof e!="function";function Li(e){return I(e?.then)}function ji(e){return I(e[yn])}function Vi(e){return Symbol.asyncIterator&&I(e?.[Symbol.asyncIterator])}function Bi(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hi=dv();function $i(e){return I(e?.[Hi])}function Ui(e){return yd(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Di(n.read());if(i)return yield Di(void 0);yield yield Di(r)}}finally{n.releaseLock()}})}function Wi(e){return I(e?.getReader)}function Q(e){if(e instanceof z)return e;if(e!=null){if(ji(e))return fv(e);if(Fi(e))return hv(e);if(Li(e))return pv(e);if(Vi(e))return Yd(e);if($i(e))return gv(e);if(Wi(e))return mv(e)}throw Bi(e)}function fv(e){return new z(t=>{let n=e[yn]();if(I(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hv(e){return new z(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function pv(e){return new z(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Si)})}function gv(e){return new z(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Yd(e){return new z(t=>{yv(e,t).catch(n=>t.error(n))})}function mv(e){return Yd(Ui(e))}function yv(e,t){var n,r,i,o;return md(this,void 0,void 0,function*(){try{for(n=vd(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Me(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ne(e,t=0){return F((n,r)=>{n.subscribe(j(r,i=>Me(r,e,()=>r.next(i),t),()=>Me(r,e,()=>r.complete(),t),i=>Me(r,e,()=>r.error(i),t)))})}function Be(e,t=0){return F((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Zd(e,t){return Q(e).pipe(Be(t),Ne(t))}function Qd(e,t){return Q(e).pipe(Be(t),Ne(t))}function Kd(e,t){return new z(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Xd(e,t){return new z(n=>{let r;return Me(n,t,()=>{r=e[Hi](),Me(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}function zi(e,t){if(!e)throw new Error("Iterable cannot be null");return new z(n=>{Me(n,t,()=>{let r=e[Symbol.asyncIterator]();Me(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Jd(e,t){return zi(Ui(e),t)}function ef(e,t){if(e!=null){if(ji(e))return Zd(e,t);if(Fi(e))return Kd(e,t);if(Li(e))return Qd(e,t);if(Vi(e))return zi(e,t);if($i(e))return Xd(e,t);if(Wi(e))return Jd(e,t)}throw Bi(e)}function bt(e,t){return t?ef(e,t):Q(e)}function Tt(...e){let t=Oi(e);return bt(e,t)}var Gi=pn(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(e,t){return F((n,r)=>{let i=0;n.subscribe(j(r,o=>{r.next(e.call(t,o,i++))}))})}function tf(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&t.complete()},h=y=>l<r?g(y):c.push(y),g=y=>{o&&t.next(y),l++;let T=!1;Q(n(y,u++)).subscribe(j(t,k=>{i?.(k),o?h(k):t.next(k)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let k=c.shift();s?Me(t,s,()=>g(k)):g(k)}f()}catch(k){t.error(k)}}))};return e.subscribe(j(t,h,()=>{d=!0,f()})),()=>{a?.()}}function ma(e,t,n=1/0){return I(t)?ma((r,i)=>ie((o,s)=>t(r,o,i,s))(Q(e(r,i))),n):(typeof t=="number"&&(n=t),F((r,i)=>tf(r,i,e,n)))}function nf(e=1/0){return ma(Se,e)}function En(...e){let t=Oi(e),n=qd(e,1/0),r=e;return r.length?r.length===1?Q(r[0]):nf(n)(bt(r,t)):Pi}function pr(e,t){return F((n,r)=>{let i=0;n.subscribe(j(r,o=>e.call(t,o,i++)&&r.next(o)))})}function rf(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe(j(s,u=>{let d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function of(e){return F((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function sf(e){return e<=0?()=>Pi:F((t,n)=>{let r=0;t.subscribe(j(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function ya(e,t=Se){return e=e??vv,F((n,r)=>{let i,o=!0;n.subscribe(j(r,s=>{let a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function vv(e,t){return e===t}function af(e=_v){return F((t,n)=>{let r=!1;t.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function _v(){return new Gi}function qi(e,t){let n=arguments.length>=2;return r=>r.pipe(e?pr((i,o)=>e(i,o,r)):Se,sf(1),n?of(t):af(()=>new Gi))}function Yi(e,t){return F(rf(e,t,arguments.length>=2,!0))}function gr(e={}){let{connector:t=()=>new ge,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},g=()=>{let y=s;h(),y?.unsubscribe()};return F((y,T)=>{l++,!d&&!u&&f();let k=c=c??t();T.add(()=>{l--,l===0&&!d&&!u&&(a=va(g,i))}),k.subscribe(T),!s&&l>0&&(s=new ct({next:H=>k.next(H),error:H=>{d=!0,f(),a=va(h,n,H),k.error(H)},complete:()=>{u=!0,f(),a=va(h,r),k.complete()}}),Q(y).subscribe(s))})(o)}}function va(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new ct({next:()=>{r.unsubscribe(),e()}});return Q(t(...n)).subscribe(r)}function Zi(e,t,n){let r,i=!1;return e&&typeof e=="object"?{bufferSize:r=1/0,windowTime:t=1/0,refCount:i=!1,scheduler:n}=e:r=e??1/0,gr({connector:()=>new xi(r,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _a(e){return F((t,n)=>{let r=!1,i=0;t.subscribe(j(n,o=>(r||(r=!e(o,i++)))&&n.next(o)))})}function ve(e,t){return F((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let l=0,u=o++;Q(e(c,u)).subscribe(i=j(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qi(e,t){return I(t)?ve(()=>e,t):ve(()=>e)}function Da(e,t,n){let r=I(e)||t||n?{next:e,error:t,complete:n}:e;return r?F((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(j(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Se}function Ea(...e){let t=Gd(e);return F((n,r)=>{let i=e.length,o=new Array(i),s=e.map(()=>!1),a=!1;for(let c=0;c<i;c++)Q(e[c]).subscribe(j(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Se))&&(s=null))},lr));n.subscribe(j(r,c=>{if(a){let l=[c,...o];r.next(t?t(...l):l)}}))})}var M=class extends Error{constructor(t,n){super(cc(t,n)),this.code=t}};function cc(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function bo(e){return{toString:e}.toString()}var Ki="__parameters__";function Dv(e){return function(...n){if(e){let r=e(...n);for(let i in r)this[i]=r[i]}}}function Ev(e,t,n){return bo(()=>{let r=Dv(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Ki)?c[Ki]:Object.defineProperty(c,Ki,{value:[]})[Ki];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var mt=globalThis;function $(e){for(let t in e)if(e[t]===$)return t;throw Error("Could not find renamed property on target object.")}function me(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(me).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function cf(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var wv=$({__forward_ref__:$});function Uf(e){return e.__forward_ref__=Uf,e.toString=function(){return me(this())},e}function $e(e){return Cv(e)?e():e}function Cv(e){return typeof e=="function"&&e.hasOwnProperty(wv)&&e.__forward_ref__===Uf}function O(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Re(e){return{providers:e.providers||[],imports:e.imports||[]}}function lc(e){return lf(e,Wf)||lf(e,zf)}function lf(e,t){return e.hasOwnProperty(t)?e[t]:null}function Iv(e){let t=e&&(e[Wf]||e[zf]);return t||null}function uf(e){return e&&(e.hasOwnProperty(df)||e.hasOwnProperty(bv))?e[df]:null}var Wf=$({\u0275prov:$}),df=$({\u0275inj:$}),zf=$({ngInjectableDef:$}),bv=$({ngInjectorDef:$}),_=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gf(e){return e&&!!e.\u0275providers}var Tv=$({\u0275cmp:$}),Sv=$({\u0275dir:$}),Mv=$({\u0275pipe:$}),Nv=$({\u0275mod:$}),ff=$({\u0275fac:$}),vr=$({__NG_ELEMENT_ID__:$}),hf=$({__NG_ENV_ID__:$});function qf(e){return typeof e=="string"?e:e==null?"":String(e)}function xv(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():qf(e)}function Av(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new M(-200,e)}function uc(e,t){throw new M(-201,!1)}var S=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(S||{}),xa;function Yf(){return xa}function Qe(e){let t=xa;return xa=e,t}function Zf(e,t,n){let r=lc(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&S.Optional)return null;if(t!==void 0)return t;uc(e,"Injector")}var Rv={},Dr=Rv,Aa="__NG_DI_FLAG__",io="ngTempTokenPath",kv="ngTokenPath",Pv=/\n/gm,Ov="\u0275",pf="__source",Tn;function Fv(){return Tn}function wn(e){let t=Tn;return Tn=e,t}function Lv(e,t=S.Default){if(Tn===void 0)throw new M(-203,!1);return Tn===null?Zf(e,void 0,t):Tn.get(e,t&S.Optional?null:void 0,t)}function m(e,t=S.Default){return(Yf()||Lv)($e(e),t)}function V(e,t=S.Default){return m(e,To(t))}function To(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ra(e){let t=[];for(let n=0;n<e.length;n++){let r=$e(e[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=S.Default;for(let s=0;s<r.length;s++){let a=r[s],c=Vv(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(m(i,o))}else t.push(m(r))}return t}function jv(e,t){return e[Aa]=t,e.prototype[Aa]=t,e}function Vv(e){return e[Aa]}function Bv(e,t,n,r){let i=e[io];throw t[pf]&&i.unshift(t[pf]),e.message=Hv(`
`+e.message,i,n,r),e[kv]=i,e[io]=null,e}function Hv(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Ov?e.slice(2):e;let i=me(t);if(Array.isArray(t))i=t.map(me).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):me(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Pv,`
  `)}`}var dc=jv(Ev("Optional"),8);function Er(e,t){let n=e.hasOwnProperty(ff);return n?e[ff]:null}function fc(e,t){e.forEach(n=>Array.isArray(n)?fc(n,t):t(n))}function Qf(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function oo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var wr={},Ke=[],Cr=new _(""),Kf=new _("",-1),Xf=new _(""),so=class{get(t,n=Dr){if(n===Dr){let r=new Error(`NullInjectorError: No provider for ${me(t)}!`);throw r.name="NullInjectorError",r}return n}},Jf=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Jf||{}),Je=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Je||{}),Nt=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Nt||{});function $v(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function ka(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];Wv(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Uv(e){return e===3||e===4||e===6}function Wv(e){return e.charCodeAt(0)===64}function hc(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?gf(e,n,i,null,t[++r]):gf(e,n,i,null,null))}}return e}function gf(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(e[o+1]=i);return}else if(r===e[o+1]){e[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r),i!==null&&e.splice(o++,0,i)}var eh="ng-template";function zv(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&$v(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(pc(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function pc(e){return e.type===4&&e.value!==eh}function Gv(e,t,n){let r=e.type===4&&!n?eh:e.value;return t===r}function qv(e,t,n){let r=4,i=e.attrs,o=i!==null?Qv(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!He(r)&&!He(c))return!1;if(s&&He(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Gv(e,c,n)||c===""&&t.length===1){if(He(r))return!1;s=!0}}else if(r&8){if(i===null||!zv(e,i,c,n)){if(He(r))return!1;s=!0}}else{let l=t[++a],u=Yv(c,i,pc(e),n);if(u===-1){if(He(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(He(r))return!1;s=!0}}}}return He(r)||s}function He(e){return(e&1)===0}function Yv(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Kv(t,e)}function Zv(e,t,n=!1){for(let r=0;r<t.length;r++)if(qv(e,t[r],n))return!0;return!1}function Qv(e){for(let t=0;t<e.length;t++){let n=e[t];if(Uv(n))return t}return e.length}function Kv(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function mf(e,t){return e?":not("+t.trim()+")":t}function Xv(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!He(s)&&(t+=mf(o,i),i=""),r=s,o=o||!He(r);n++}return i!==""&&(t+=mf(o,i)),t}function Jv(e){return e.map(Xv).join(",")}function e_(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!He(i))break;i=o}r++}return{attrs:t,classes:n}}function So(e){return bo(()=>{let t=ih(e),n=be(fe({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Jf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Je.Emulated,styles:e.styles||Ke,_:null,schemas:e.schemas||null,tView:null,id:""});oh(n);let r=e.dependencies;return n.directiveDefs=vf(r,!1),n.pipeDefs=vf(r,!0),n.id=o_(n),n})}function t_(e){return Mn(e)||nh(e)}function n_(e){return e!==null}function ke(e){return bo(()=>({type:e.type,bootstrap:e.bootstrap||Ke,declarations:e.declarations||Ke,imports:e.imports||Ke,exports:e.exports||Ke,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function yf(e,t){if(e==null)return wr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a=Nt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),t?(n[o]=a!==Nt.None?[r,a]:r,t[o]=s):n[o]=r}return n}function th(e){return bo(()=>{let t=ih(e);return oh(t),t})}function Mn(e){return e[Tv]||null}function nh(e){return e[Sv]||null}function rh(e){return e[Mv]||null}function r_(e){let t=Mn(e)||nh(e)||rh(e);return t!==null?t.standalone:!1}function i_(e,t){let n=e[Nv]||null;if(!n&&t===!0)throw new Error(`Type ${me(e)} does not have '\u0275mod' property.`);return n}function ih(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||wr,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ke,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yf(e.inputs,t),outputs:yf(e.outputs),debugInfo:null}}function oh(e){e.features?.forEach(t=>t(e))}function vf(e,t){if(!e)return null;let n=t?rh:t_;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(n_)}function o_(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function s_(...e){return{\u0275providers:a_(!0,e),\u0275fromNgModule:!0}}function a_(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return fc(t,s=>{let a=s;Pa(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sh(i,o),n}function sh(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];gc(i,o=>{t(o,r)})}}function Pa(e,t,n,r){if(e=$e(e),!e)return!1;let i=null,o=uf(e),s=!o&&Mn(e);if(!o&&!s){let c=e.ngModule;if(o=uf(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Pa(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{fc(o.imports,u=>{Pa(u,t,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&sh(l,t)}if(!a){let l=Er(i)||(()=>new i);t({provide:i,useFactory:l,deps:Ke},i),t({provide:Xf,useValue:i,multi:!0},i),t({provide:Cr,useValue:()=>m(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;gc(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function gc(e,t){for(let n of e)Gf(n)&&(n=n.\u0275providers),Array.isArray(n)?gc(n,t):t(n)}var c_=$({provide:String,useValue:$});function ah(e){return e!==null&&typeof e=="object"&&c_ in e}function l_(e){return!!(e&&e.useExisting)}function u_(e){return!!(e&&e.useFactory)}function Oa(e){return typeof e=="function"}var Mo=new _(""),eo={},d_={},wa;function ch(){return wa===void 0&&(wa=new so),wa}var Gt=class{},Fa=class extends Gt{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ja(t,s=>this.processProvider(s)),this.records.set(Kf,Cn(void 0,this)),i.has("environment")&&this.records.set(Gt,Cn(void 0,this));let o=this.records.get(Mo);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Xf,Ke,S.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=wn(this),r=Qe(void 0),i;try{return t()}finally{wn(n),Qe(r)}}get(t,n=Dr,r=S.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(hf))return t[hf](this);r=To(r);let i,o=wn(this),s=Qe(void 0);try{if(!(r&S.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=y_(t)&&lc(t);l&&this.injectableDefInScope(l)?c=Cn(La(t),eo):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=r&S.Self?ch():this.parent;return n=r&S.Optional&&n===Dr?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[io]=a[io]||[]).unshift(me(t)),o)throw a;return Bv(a,t,"R3InjectorError",this.source)}else throw a}finally{Qe(s),wn(o)}}resolveInjectorInitializers(){let t=L(null),n=wn(this),r=Qe(void 0),i;try{let o=this.get(Cr,Ke,S.Self);for(let s of o)s()}finally{wn(n),Qe(r),L(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(me(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(t){t=$e(t);let n=Oa(t)?t:$e(t&&t.provide),r=h_(t);if(!Oa(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Cn(void 0,eo,!0),i.factory=()=>Ra(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=L(null);try{return n.value===eo&&(n.value=d_,n.value=n.factory()),typeof n.value=="object"&&n.value&&m_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=$e(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function La(e){let t=lc(e),n=t!==null?t.factory:Er(e);if(n!==null)return n;if(e instanceof _)throw new M(204,!1);if(e instanceof Function)return f_(e);throw new M(204,!1)}function f_(e){if(e.length>0)throw new M(204,!1);let n=Iv(e);return n!==null?()=>n.factory(e):()=>new e}function h_(e){if(ah(e))return Cn(void 0,e.useValue);{let t=p_(e);return Cn(t,eo)}}function p_(e,t,n){let r;if(Oa(e)){let i=$e(e);return Er(i)||La(i)}else if(ah(e))r=()=>$e(e.useValue);else if(u_(e))r=()=>e.useFactory(...Ra(e.deps||[]));else if(l_(e))r=()=>m($e(e.useExisting));else{let i=$e(e&&(e.useClass||e.provide));if(g_(e))r=()=>new i(...Ra(e.deps));else return Er(i)||La(i)}return r}function Cn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function g_(e){return!!e.deps}function m_(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function y_(e){return typeof e=="function"||typeof e=="object"&&e instanceof _}function ja(e,t){for(let n of e)Array.isArray(n)?ja(n,t):n&&Gf(n)?ja(n.\u0275providers,t):t(n)}function v_(){return Yf()!==void 0||Fv()!=null}function __(e){let t=mt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function D_(e){return typeof e=="function"}var yt=0,N=1,D=2,ae=3,Ue=4,We=5,ao=6,_f=7,ut=8,Nn=9,dt=10,_e=11,Ir=12,Df=13,On=14,ft=15,xn=16,In=17,An=18,No=19,lh=20,Mt=21,Ca=22,xe=23,ht=25,uh=1;var qt=7,co=8,lo=9,Ae=10,uo=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(uo||{});function Wt(e){return Array.isArray(e)&&typeof e[uh]=="object"}function vt(e){return Array.isArray(e)&&e[uh]===!0}function dh(e){return(e.flags&4)!==0}function mc(e){return e.componentOffset>-1}function fh(e){return(e.flags&1)===1}function Nr(e){return!!e.template}function Va(e){return(e[D]&512)!==0}var Ba=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hh(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function ph(){return gh}function gh(e){return e.type.prototype.ngOnChanges&&(e.setInput=w_),E_}ph.ngInherit=!0;function E_(){let e=yh(this),t=e?.current;if(t){let n=e.previous;if(n===wr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function w_(e,t,n,r,i){let o=this.declaredInputs[r],s=yh(e)||C_(e,{previous:wr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Ba(l&&l.currentValue,n,c===wr),hh(e,t,i,n)}var mh="__ngSimpleChanges__";function yh(e){return e[mh]||null}function C_(e,t){return e[mh]=t}var Ef=null;var St=function(e,t,n){Ef?.(e,t,n)},I_="svg",b_="math";function pt(e){for(;Array.isArray(e);)e=e[yt];return e}function T_(e,t){return pt(t[e])}function et(e,t){return pt(t[e.index])}function vh(e,t){return e.data[t]}function S_(e,t){return e[t]}function xr(e,t){let n=t[e];return Wt(n)?n:n[yt]}function yc(e){return(e[D]&128)===128}function M_(e){return vt(e[ae])}function fo(e,t){return t==null?null:e[t]}function _h(e){e[In]=0}function Dh(e){e[D]&1024||(e[D]|=1024,yc(e)&&Ao(e))}function N_(e,t){for(;e>0;)t=t[On],e--;return t}function xo(e){return!!(e[D]&9216||e[xe]?.dirty)}function Ha(e){e[dt].changeDetectionScheduler?.notify(8),e[D]&64&&(e[D]|=1024),xo(e)&&Ao(e)}function Ao(e){e[dt].changeDetectionScheduler?.notify(0);let t=Yt(e);for(;t!==null&&!(t[D]&8192||(t[D]|=8192,!yc(t)));)t=Yt(t)}function Eh(e,t){if((e[D]&256)===256)throw new M(911,!1);e[Mt]===null&&(e[Mt]=[]),e[Mt].push(t)}function x_(e,t){if(e[Mt]===null)return;let n=e[Mt].indexOf(t);n!==-1&&e[Mt].splice(n,1)}function Yt(e){let t=e[ae];return vt(t)?t[ae]:t}var x={lFrame:Ah(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wh=!1;function A_(){return x.lFrame.elementDepthCount}function R_(){x.lFrame.elementDepthCount++}function k_(){x.lFrame.elementDepthCount--}function Ch(){return x.bindingsEnabled}function P_(){return x.skipHydrationRootTNode!==null}function O_(e){return x.skipHydrationRootTNode===e}function F_(){x.skipHydrationRootTNode=null}function ce(){return x.lFrame.lView}function Fn(){return x.lFrame.tView}function _t(){let e=Ih();for(;e!==null&&e.type===64;)e=e.parent;return e}function Ih(){return x.lFrame.currentTNode}function L_(){let e=x.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ar(e,t){let n=x.lFrame;n.currentTNode=e,n.isParent=t}function bh(){return x.lFrame.isParent}function j_(){x.lFrame.isParent=!1}function V_(){return x.lFrame.contextLView}function Th(){return wh}function wf(e){wh=e}function B_(e){return x.lFrame.bindingIndex=e}function Sh(){return x.lFrame.bindingIndex++}function H_(){return x.lFrame.inI18n}function $_(e,t){let n=x.lFrame;n.bindingIndex=n.bindingRootIndex=e,$a(t)}function U_(){return x.lFrame.currentDirectiveIndex}function $a(e){x.lFrame.currentDirectiveIndex=e}function Mh(e){x.lFrame.currentQueryIndex=e}function W_(e){let t=e[N];return t.type===2?t.declTNode:t.type===1?e[We]:null}function Nh(e,t,n){if(n&S.SkipSelf){let i=t,o=e;for(;i=i.parent,i===null&&!(n&S.Host);)if(i=W_(o),i===null||(o=o[On],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=x.lFrame=xh();return r.currentTNode=t,r.lView=e,!0}function vc(e){let t=xh(),n=e[N];x.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function xh(){let e=x.lFrame,t=e===null?null:e.child;return t===null?Ah(e):t}function Ah(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Rh(){let e=x.lFrame;return x.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var kh=Rh;function _c(){let e=Rh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function z_(e){return(x.lFrame.contextLView=N_(e,x.lFrame.contextLView))[ut]}function Dc(){return x.lFrame.selectedIndex}function Zt(e){x.lFrame.selectedIndex=e}function G_(){let e=x.lFrame;return vh(e.tView,e.selectedIndex)}function q_(){return x.lFrame.currentNamespace}var Ph=!0;function Ec(){return Ph}function wc(e){Ph=e}function Y_(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=gh(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Cc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function to(e,t,n){Oh(e,t,3,n)}function no(e,t,n,r){(e[D]&3)===n&&Oh(e,t,n,r)}function Ia(e,t){let n=e[D];(n&3)===t&&(n&=16383,n+=1,e[D]=n)}function Oh(e,t,n,r){let i=r!==void 0?e[In]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[In]+=65536),(a<o||o==-1)&&(Z_(e,n,t,c),e[In]=(e[In]&4294901760)+c+2),c++}function Cf(e,t){St(4,e,t);let n=L(null);try{t.call(e)}finally{L(n),St(5,e,t)}}function Z_(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[D]>>14<e[In]>>16&&(e[D]&3)===t&&(e[D]+=16384,Cf(a,o)):Cf(a,o)}var Sn=-1,br=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Q_(e){return e instanceof br}function K_(e){return(e.flags&8)!==0}function X_(e){return(e.flags&16)!==0}var ba={},Ua=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=To(r);let i=this.injector.get(t,ba,r);return i!==ba||n===ba?i:this.parentInjector.get(t,n,r)}};function Fh(e){return e!==Sn}function ho(e){return e&32767}function J_(e){return e>>16}function po(e,t){let n=J_(e),r=t;for(;n>0;)r=r[On],n--;return r}var Wa=!0;function If(e){let t=Wa;return Wa=e,t}var eD=256,Lh=eD-1,jh=5,tD=0,Xe={};function nD(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vr)&&(r=n[vr]),r==null&&(r=n[vr]=tD++);let i=r&Lh,o=1<<i;t.data[e+(i>>jh)]|=o}function Vh(e,t){let n=Bh(e,t);if(n!==-1)return n;let r=t[N];r.firstCreatePass&&(e.injectorIndex=t.length,Ta(r.data,e),Ta(t,null),Ta(r.blueprint,null));let i=Ic(e,t),o=e.injectorIndex;if(Fh(i)){let s=ho(i),a=po(i,t),c=a[N].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Ta(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Bh(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Ic(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=zh(i),r===null)return Sn;if(n++,i=i[On],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Sn}function rD(e,t,n){nD(e,t,n)}function Hh(e,t,n){if(n&S.Optional||e!==void 0)return e;uc(t,"NodeInjector")}function $h(e,t,n,r){if(n&S.Optional&&r===void 0&&(r=null),!(n&(S.Self|S.Host))){let i=e[Nn],o=Qe(void 0);try{return i?i.get(t,r,n&S.Optional):Zf(t,r,n&S.Optional)}finally{Qe(o)}}return Hh(r,t,n)}function Uh(e,t,n,r=S.Default,i){if(e!==null){if(t[D]&2048&&!(r&S.Self)){let s=cD(e,t,n,r,Xe);if(s!==Xe)return s}let o=Wh(e,t,n,r,Xe);if(o!==Xe)return o}return $h(t,n,r,i)}function Wh(e,t,n,r,i){let o=sD(n);if(typeof o=="function"){if(!Nh(t,e,r))return r&S.Host?Hh(i,n,r):$h(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&S.Optional))uc(n);else return s}finally{kh()}}else if(typeof o=="number"){let s=null,a=Bh(e,t),c=Sn,l=r&S.Host?t[ft][We]:null;for((a===-1||r&S.SkipSelf)&&(c=a===-1?Ic(e,t):t[a+8],c===Sn||!Tf(r,!1)?a=-1:(s=t[N],a=ho(c),t=po(c,t)));a!==-1;){let u=t[N];if(bf(o,a,u.data)){let d=iD(a,t,n,s,r,l);if(d!==Xe)return d}c=t[a+8],c!==Sn&&Tf(r,t[N].data[a+8]===l)&&bf(o,a,t)?(s=u,a=ho(c),t=po(c,t)):a=-1}}return i}function iD(e,t,n,r,i,o){let s=t[N],a=s.data[e+8],c=r==null?mc(a)&&Wa:r!=s&&(a.type&3)!==0,l=i&S.Host&&o===a,u=oD(a,s,n,c,l);return u!==null?Tr(t,s,u,a):Xe}function oD(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let g=s[h];if(h<c&&n===g||h>=c&&g.type===n)return h}if(i){let h=s[c];if(h&&Nr(h)&&h.type===n)return c}return null}function Tr(e,t,n,r){let i=e[n],o=t.data;if(Q_(i)){let s=i;s.resolving&&Av(xv(o[n]));let a=If(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Qe(s.injectImpl):null,u=Nh(e,r,S.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&Y_(n,o[n],t)}finally{l!==null&&Qe(l),If(a),s.resolving=!1,kh()}}return i}function sD(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(vr)?e[vr]:void 0;return typeof t=="number"?t>=0?t&Lh:aD:t}function bf(e,t,n){let r=1<<e;return!!(n[t+(e>>jh)]&r)}function Tf(e,t){return!(e&S.Self)&&!(e&S.Host&&t)}var zt=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Uh(this._tNode,this._lView,t,To(r),n)}};function aD(){return new zt(_t(),ce())}function cD(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[D]&2048&&!(s[D]&512);){let a=Wh(o,s,n,r|S.Self,Xe);if(a!==Xe)return a;let c=o.parent;if(!c){let l=s[lh];if(l){let u=l.get(n,Xe,r);if(u!==Xe)return u}c=zh(s),s=s[On]}o=c}return i}function zh(e){let t=e[N],n=t.type;return n===2?t.declTNode:n===1?e[We]:null}function Sf(e,t=null,n=null,r){let i=Gh(e,t,n,r);return i.resolveInjectorInitializers(),i}function Gh(e,t=null,n=null,r,i=new Set){let o=[n||Ke,s_(e)];return r=r||(typeof e=="object"?void 0:me(e)),new Fa(o,t||ch(),r||null,i)}var Qt=class e{static{this.THROW_IF_NOT_FOUND=Dr}static{this.NULL=new so}static create(t,n){if(Array.isArray(t))return Sf({name:""},n,t,"");{let r=t.name??"";return Sf({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=O({token:e,providedIn:"any",factory:()=>m(Kf)})}static{this.__NG_ELEMENT_ID__=-1}};var lD=new _("");lD.__NG_ELEMENT_ID__=e=>{let t=_t();if(t===null)throw new M(204,!1);if(t.type&2)return t.value;if(e&S.Optional)return null;throw new M(204,!1)};var uD="ngOriginalError";function Sa(e){return e[uD]}var qh=!0,Yh=(()=>{class e{static{this.__NG_ELEMENT_ID__=dD}static{this.__NG_ENV_ID__=n=>n}}return e})(),za=class extends Yh{constructor(t){super(),this._lView=t}onDestroy(t){return Eh(this._lView,t),()=>x_(this._lView,t)}};function dD(){return new za(ce())}var Ro=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ur(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}}return e})();var Ga=class extends ge{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,v_()&&(this.destroyRef=V(Yh,{optional:!0})??void 0,this.pendingTasks=V(Ro,{optional:!0})??void 0)}emit(t){let n=L(null);try{super.next(t)}finally{L(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof ee&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},lt=Ga;function go(...e){}function Zh(e){let t,n;function r(){e=go;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Mf(e){return queueMicrotask(()=>e()),()=>{e=go}}var bc="isAngularZone",mo=bc+"_ID",fD=0,P=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qh}=t;if(typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,gD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bc)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new M(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,hD,go,go);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},hD={};function Tc(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function pD(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Zh(()=>{e.callbackScheduled=!1,qa(e),e.isCheckStableRunning=!0,Tc(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),qa(e)}function gD(e){let t=()=>{pD(e)},n=fD++;e._inner=e._inner.fork({name:"angular",properties:{[bc]:!0,[mo]:n,[mo+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(mD(c))return r.invokeTask(o,s,a,c);try{return Nf(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),xf(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Nf(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!yD(c)&&t(),xf(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,qa(e),Tc(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function qa(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Nf(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xf(e){e._nesting--,Tc(e)}var yo=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function mD(e){return Qh(e,"__ignore_ng_zone__")}function yD(e){return Qh(e,"__scheduler_tick__")}function Qh(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}function vD(e="zone.js",t){return e==="noop"?new yo:e==="zone.js"?new P(t):e}var gt=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Sa(t);for(;n&&Sa(n);)n=Sa(n);return n||null}},_D=new _("",{providedIn:"root",factory:()=>{let e=V(P),t=V(gt);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function DD(){return ko(_t(),ce())}function ko(e,t){return new Sc(et(e,t))}var Sc=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=DD}}return e})();function Kh(e){return(e.flags&128)===128}var Xh=new Map,ED=0;function wD(){return ED++}function CD(e){Xh.set(e[No],e)}function Ya(e){Xh.delete(e[No])}var Af="__ngContext__";function Kt(e,t){Wt(t)?(e[Af]=t[No],CD(t)):e[Af]=t}function Jh(e){return tp(e[Ir])}function ep(e){return tp(e[Ue])}function tp(e){for(;e!==null&&!vt(e);)e=e[Ue];return e}var Za;function np(e){Za=e}function ID(){if(Za!==void 0)return Za;if(typeof document<"u")return document;throw new M(210,!1)}var Po=new _("",{providedIn:"root",factory:()=>bD}),bD="ng",Mc=new _(""),Pe=new _("",{providedIn:"platform",factory:()=>"unknown"});var Nc=new _("",{providedIn:"root",factory:()=>ID().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TD="h",SD="b";var MD=()=>null;function xc(e,t,n=!1){return MD(e,t,n)}var rp=!1,ND=new _("",{providedIn:"root",factory:()=>rp});function xD(e){return e instanceof Function?e():e}var Jt=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Jt||{}),AD;function Ac(e,t){return AD(e,t)}function bn(e,t,n,r,i){if(r!=null){let o,s=!1;vt(r)?o=r:Wt(r)&&(s=!0,r=r[yt]);let a=pt(r);e===0&&n!==null?i==null?cp(t,n,a):vo(t,n,a,i||null,!0):e===1&&n!==null?vo(t,n,a,i||null,!0):e===2?GD(t,a,s):e===3&&t.destroyNode(a),o!=null&&YD(t,e,o,n,i)}}function RD(e,t){return e.createText(t)}function kD(e,t,n){e.setValue(t,n)}function ip(e,t,n){return e.createElement(t,n)}function PD(e,t){op(e,t),t[yt]=null,t[We]=null}function OD(e,t,n,r,i,o){r[yt]=i,r[We]=t,Oo(e,r,n,1,i,o)}function op(e,t){t[dt].changeDetectionScheduler?.notify(9),Oo(e,t,t[_e],2,null,null)}function FD(e){let t=e[Ir];if(!t)return Ma(e[N],e);for(;t;){let n=null;if(Wt(t))n=t[Ir];else{let r=t[Ae];r&&(n=r)}if(!n){for(;t&&!t[Ue]&&t!==e;)Wt(t)&&Ma(t[N],t),t=t[ae];t===null&&(t=e),Wt(t)&&Ma(t[N],t),n=t&&t[Ue]}t=n}}function LD(e,t,n,r){let i=Ae+r,o=n.length;r>0&&(n[i-1][Ue]=t),r<o-Ae?(t[Ue]=n[i],Qf(n,Ae+r,t)):(n.push(t),t[Ue]=null),t[ae]=n;let s=t[xn];s!==null&&n!==s&&sp(s,t);let a=t[An];a!==null&&a.insertView(e),Ha(t),t[D]|=128}function sp(e,t){let n=e[lo],r=t[ae];if(Wt(r))e[D]|=uo.HasTransplantedViews;else{let i=r[ae][ft];t[ft]!==i&&(e[D]|=uo.HasTransplantedViews)}n===null?e[lo]=[t]:n.push(t)}function Rc(e,t){let n=e[lo],r=n.indexOf(t);n.splice(r,1)}function Qa(e,t){if(e.length<=Ae)return;let n=Ae+t,r=e[n];if(r){let i=r[xn];i!==null&&i!==e&&Rc(i,r),t>0&&(e[n-1][Ue]=r[Ue]);let o=oo(e,Ae+t);PD(r[N],r);let s=o[An];s!==null&&s.detachView(o[N]),r[ae]=null,r[Ue]=null,r[D]&=-129}return r}function ap(e,t){if(!(t[D]&256)){let n=t[_e];n.destroyNode&&Oo(e,t,n,3,null,null),FD(t)}}function Ma(e,t){if(t[D]&256)return;let n=L(null);try{t[D]&=-129,t[D]|=256,t[xe]&&ia(t[xe]),VD(e,t),jD(e,t),t[N].type===1&&t[_e].destroy();let r=t[xn];if(r!==null&&vt(t[ae])){r!==t[ae]&&Rc(r,t);let i=t[An];i!==null&&i.detachView(e)}Ya(t)}finally{L(n)}}function jD(e,t){let n=e.cleanup,r=t[_f];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(t[_f]=null);let i=t[Mt];if(i!==null){t[Mt]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function VD(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof br)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];St(4,a,c);try{c.call(a)}finally{St(5,a,c)}}else{St(4,i,o);try{o.call(i)}finally{St(5,i,o)}}}}}function BD(e,t,n){return HD(e,t.parent,n)}function HD(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[yt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=e.data[r.directiveStart+i];if(o===Je.None||o===Je.Emulated)return null}return et(r,n)}}function vo(e,t,n,r,i){e.insertBefore(t,n,r,i)}function cp(e,t,n){e.appendChild(t,n)}function Rf(e,t,n,r,i){r!==null?vo(e,t,n,r,i):cp(e,t,n)}function lp(e,t){return e.parentNode(t)}function $D(e,t){return e.nextSibling(t)}function UD(e,t,n){return zD(e,t,n)}function WD(e,t,n){return e.type&40?et(e,n):null}var zD=WD,kf;function kc(e,t,n,r){let i=BD(e,r,t),o=t[_e],s=r.parent||t[We],a=UD(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Rf(o,i,n[c],a,!1);else Rf(o,i,n,a,!1);kf!==void 0&&kf(o,r,t,n,i)}function mr(e,t){if(t!==null){let n=t.type;if(n&3)return et(t,e);if(n&4)return Ka(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return mr(e,r);{let i=e[t.index];return vt(i)?Ka(-1,i):pt(i)}}else{if(n&128)return mr(e,t.next);if(n&32)return Ac(t,e)()||pt(e[t.index]);{let r=up(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Yt(e[ft]);return mr(i,r)}else return mr(e,t.next)}}}return null}function up(e,t){if(t!==null){let r=e[ft][We],i=t.projection;return r.projection[i]}return null}function Ka(e,t){let n=Ae+e+1;if(n<t.length){let r=t[n],i=r[N].firstChild;if(i!==null)return mr(r,i)}return t[qt]}function GD(e,t,n){e.removeChild(null,t,n)}function Pc(e,t,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&t===0&&(a&&Kt(pt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Pc(e,t,n.child,r,i,o,!1),bn(t,e,i,a,o);else if(c&32){let l=Ac(n,r),u;for(;u=l();)bn(t,e,i,u,o);bn(t,e,i,a,o)}else c&16?qD(e,t,r,n,i,o):bn(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Oo(e,t,n,r,i,o){Pc(n,r,e.firstChild,t,i,o,!1)}function qD(e,t,n,r,i,o){let s=n[ft],c=s[We].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];bn(t,e,i,u,o)}else{let l=c,u=s[ae];Kh(r)&&(l.flags|=128),Pc(e,t,l,u,i,o,!0)}}function YD(e,t,n,r,i){let o=n[qt],s=pt(n);o!==s&&bn(t,e,r,o,i);for(let a=Ae;a<n.length;a++){let c=n[a];Oo(c[N],c,e,t,r,o)}}function ZD(e,t,n){e.setAttribute(t,"style",n)}function dp(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function fp(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ka(e,t,r),i!==null&&dp(e,t,i),o!==null&&ZD(e,t,o)}var Fo={};function Ln(e=1){hp(Fn(),ce(),Dc()+e,!1)}function hp(e,t,n,r){if(!r)if((t[D]&3)===3){let o=e.preOrderCheckHooks;o!==null&&to(t,o,n)}else{let o=e.preOrderHooks;o!==null&&no(t,o,0,n)}Zt(n)}function jn(e,t=S.Default){let n=ce();if(n===null)return m(e,t);let r=_t();return Uh(r,n,$e(e),t)}function pp(e,t,n,r,i,o){let s=L(null);try{let a=null;i&Nt.SignalBased&&(a=t[r][kd]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Nt.HasDecoratorInputTransform&&(o=e.inputTransforms[r].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,r):hh(t,a,r,o)}finally{L(s)}}function QD(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Zt(~i);else{let o=i,s=n[++r],a=n[++r];$_(s,o);let c=t[o];a(2,c)}}}finally{Zt(-1)}}function Lo(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[yt]=i,d[D]=r|4|128|8|64,(l!==null||e&&e[D]&2048)&&(d[D]|=2048),_h(d),d[ae]=d[On]=e,d[ut]=n,d[dt]=s||e&&e[dt],d[_e]=a||e&&e[_e],d[Nn]=c||e&&e[Nn]||null,d[We]=o,d[No]=wD(),d[ao]=u,d[lh]=l,d[ft]=t.type==2?e[ft]:d,d}function jo(e,t,n,r,i){let o=e.data[t];if(o===null)o=KD(e,t,n,r,i),H_()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=L_();o.injectorIndex=s===null?-1:s.injectorIndex}return Ar(o,!0),o}function KD(e,t,n,r,i){let o=Ih(),s=bh(),a=s?o:o&&o.parent,c=e.data[t]=nE(e,a,n,t,r,i);return e.firstChild===null&&(e.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function gp(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function mp(e,t,n,r,i){let o=Dc(),s=r&2;try{Zt(-1),s&&t.length>ht&&hp(e,t,ht,!1),St(s?2:0,i),n(r,i)}finally{Zt(o),St(s?3:1,i)}}function yp(e,t,n){if(dh(t)){let r=L(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{L(r)}}}function vp(e,t,n){Ch()&&(lE(e,t,n,et(n,t)),(n.flags&64)===64&&Cp(e,t,n))}function _p(e,t,n=et){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function Dp(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Oc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Oc(e,t,n,r,i,o,s,a,c,l,u){let d=ht+r,f=d+i,h=XD(d,f),g=typeof l=="function"?l():l;return h[N]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function XD(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:Fo);return n}function JD(e,t,n,r){let o=r.get(ND,rp)||n===Je.ShadowDom,s=e.selectRootElement(t,o);return eE(s),s}function eE(e){tE(e)}var tE=()=>null;function nE(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return P_()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Pf(e,t,n,r,i){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;r??={};let a,c=Nt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}e===0?Of(r,n,l,a,c):Of(r,n,l,a)}return r}function Of(e,t,n,r,i){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,r):o=e[n]=[t,r],i!==void 0&&o.push(i)}function rE(e,t,n){let r=t.directiveStart,i=t.directiveEnd,o=e.data,s=t.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,g=f?f.outputs:null;c=Pf(0,d.inputs,u,c,h),l=Pf(1,d.outputs,u,l,g);let y=c!==null&&s!==null&&!pc(t)?vE(c,u,s):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function iE(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function oE(e,t,n,r,i,o,s,a){let c=et(t,n),l=t.inputs,u;!a&&l!=null&&(u=l[r])?(Fc(e,n,u,r,i),mc(t)&&sE(n,t.index)):t.type&3?(r=iE(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(c,r,i)):t.type&12}function sE(e,t){let n=xr(t,e);n[D]&16||(n[D]|=64)}function Ep(e,t,n,r){if(Ch()){let i=r===null?null:{"":-1},o=dE(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&wp(e,t,n,s,i,a),i&&fE(n,r,i)}n.mergedAttrs=hc(n.mergedAttrs,n.attrs)}function wp(e,t,n,r,i,o){for(let l=0;l<r.length;l++)rD(Vh(n,t),e,r[l].type);pE(n,e.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=gp(e,t,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=hc(n.mergedAttrs,u.hostAttrs),gE(e,n,t,c,u),hE(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}rE(e,n,o)}function aE(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;cE(s)!=a&&s.push(a),s.push(n,r,o)}}function cE(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function lE(e,t,n,r){let i=n.directiveStart,o=n.directiveEnd;mc(n)&&mE(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Vh(n,t),Kt(r,t);let s=n.initialInputs;for(let a=i;a<o;a++){let c=e.data[a],l=Tr(t,e,a,n);if(Kt(l,t),s!==null&&yE(t,a-i,l,c,n,s),Nr(c)){let u=xr(n.index,t);u[ut]=Tr(t,e,a,n)}}}function Cp(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=U_();try{Zt(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];$a(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&uE(c,l)}}finally{Zt(-1),$a(s)}}function uE(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function dE(e,t){let n=e.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(Zv(t,s.selectors,!1))if(r||(r=[]),Nr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Xa(e,t,c)}else r.unshift(s),Xa(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Xa(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function fE(e,t,n){if(t){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new M(-301,!1);r.push(t[i],o)}}}function hE(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Nr(t)&&(n[""]=e)}}function pE(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function gE(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=Er(i.type,!0)),s=new br(o,Nr(i),jn);e.blueprint[r]=s,n[r]=s,aE(e,t,r,gp(e,n,i.hostVars,Fo),i)}function mE(e,t,n){let r=et(t,e),i=Dp(n),o=e[dt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vo(e,Lo(e,i,null,s,r,t,null,o.createRenderer(r,n),null,null,null));e[t.index]=a}function yE(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];pp(r,n,c,l,u,d)}}function vE(e,t,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){r===null&&(r=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Ip(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function bp(e,t){let n=e.contentQueries;if(n!==null){let r=L(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Mh(o),a.contentQueries(2,t[s],s)}}}finally{L(r)}}}function Vo(e,t){return e[Ir]?e[Df][Ue]=t:e[Ir]=t,e[Df]=t,t}function Ja(e,t,n){Mh(0);let r=L(null);try{t(e,n)}finally{L(r)}}function _E(e,t){let n=e[Nn],r=n?n.get(gt,null):null;r&&r.handleError(t)}function Fc(e,t,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=t[s],u=e.data[s];pp(u,l,r,a,c,i)}}function DE(e,t,n){let r=T_(t,e);kD(e[_e],r,n)}function EE(e,t){let n=xr(t,e),r=n[N];wE(r,n);let i=n[yt];i!==null&&n[ao]===null&&(n[ao]=xc(i,n[Nn])),Lc(r,n,n[ut])}function wE(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Lc(e,t,n){vc(t);try{let r=e.viewQuery;r!==null&&Ja(1,r,n);let i=e.template;i!==null&&mp(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[An]?.finishViewCreation(e),e.staticContentQueries&&bp(e,t),e.staticViewQueries&&Ja(2,e.viewQuery,n);let o=e.components;o!==null&&CE(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[D]&=-5,_c()}}function CE(e,t){for(let n=0;n<t.length;n++)EE(e,t[n])}function IE(e,t,n,r){let i=L(null);try{let o=t.tView,a=e[D]&4096?4096:16,c=Lo(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[xn]=l;let u=e[An];return u!==null&&(c[An]=u.createEmbeddedView(o)),Lc(o,c,n),c}finally{L(i)}}function Ff(e,t){return!t||t.firstChild===null||Kh(e)}function bE(e,t,n,r=!0){let i=t[N];if(LD(i,t,e,n),r){let s=Ka(n,e),a=t[_e],c=lp(a,e[qt]);c!==null&&OD(i,e[We],a,t,c,s)}let o=t[ao];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function _o(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(pt(o)),vt(o)&&TE(o,r);let s=n.type;if(s&8)_o(e,t,n.child,r);else if(s&32){let a=Ac(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=up(t,n);if(Array.isArray(a))r.push(...a);else{let c=Yt(t[ft]);_o(c[N],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function TE(e,t){for(let n=Ae;n<e.length;n++){let r=e[n],i=r[N].firstChild;i!==null&&_o(r[N],r,i,t)}e[qt]!==e[yt]&&t.push(e[qt])}var Tp=[];function SE(e){return e[xe]??ME(e)}function ME(e){let t=Tp.pop()??Object.create(xE);return t.lView=e,t}function NE(e){e.lView[xe]!==e&&(e.lView=null,Tp.push(e))}var xE=be(fe({},ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ao(e.lView)},consumerOnSignalRead(){this.lView[xe]=this}});function AE(e){let t=e[xe]??Object.create(RE);return t.lView=e,t}var RE=be(fe({},ta),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Yt(e.lView);for(;t&&!Sp(t[N]);)t=Yt(t);t&&Dh(t)},consumerOnSignalRead(){this.lView[xe]=this}});function Sp(e){return e.type!==2}var kE=100;function Mp(e,t=!0,n=0){let r=e[dt],i=r.rendererFactory,o=!1;o||i.begin?.();try{PE(e,n)}catch(s){throw t&&_E(e,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function PE(e,t){let n=Th();try{wf(!0),ec(e,t);let r=0;for(;xo(e);){if(r===kE)throw new M(103,!1);r++,ec(e,1)}}finally{wf(n)}}function OE(e,t,n,r){let i=t[D];if((i&256)===256)return;let o=!1,s=!1;!o&&t[dt].inlineEffectRunner?.flush(),vc(t);let a=!0,c=null,l=null;o||(Sp(e)?(l=SE(t),c=na(l)):Pd()===null?(a=!1,l=AE(t),c=na(l)):t[xe]&&(ia(t[xe]),t[xe]=null));try{_h(t),B_(e.bindingStartIndex),n!==null&&mp(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=e.preOrderCheckHooks;h!==null&&to(t,h,null)}else{let h=e.preOrderHooks;h!==null&&no(t,h,0,null),Ia(t,0)}if(s||FE(t),Np(t,0),e.contentQueries!==null&&bp(e,t),!o)if(u){let h=e.contentCheckHooks;h!==null&&to(t,h)}else{let h=e.contentHooks;h!==null&&no(t,h,1),Ia(t,1)}QD(e,t);let d=e.components;d!==null&&Ap(t,d,0);let f=e.viewQuery;if(f!==null&&Ja(2,f,r),!o)if(u){let h=e.viewCheckHooks;h!==null&&to(t,h)}else{let h=e.viewHooks;h!==null&&no(t,h,2),Ia(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ca]){for(let h of t[Ca])h();t[Ca]=null}o||(t[D]&=-73)}catch(u){throw o||Ao(t),u}finally{l!==null&&(Od(l,c),a&&NE(l)),_c()}}function Np(e,t){for(let n=Jh(e);n!==null;n=ep(n))for(let r=Ae;r<n.length;r++){let i=n[r];xp(i,t)}}function FE(e){for(let t=Jh(e);t!==null;t=ep(t)){if(!(t[D]&uo.HasTransplantedViews))continue;let n=t[lo];for(let r=0;r<n.length;r++){let i=n[r];Dh(i)}}}function LE(e,t,n){let r=xr(t,e);xp(r,n)}function xp(e,t){yc(e)&&ec(e,t)}function ec(e,t){let r=e[N],i=e[D],o=e[xe],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ra(o)),s||=!1,o&&(o.dirty=!1),e[D]&=-9217,s)OE(r,e,r.template,e[ut]);else if(i&8192){Np(e,1);let a=r.components;a!==null&&Ap(e,a,1)}}function Ap(e,t,n){for(let r=0;r<t.length;r++)LE(e,t[r],n)}function Rp(e,t){let n=Th()?64:1088;for(e[dt].changeDetectionScheduler?.notify(t);e;){e[D]|=n;let r=Yt(e);if(Va(e)&&!r)return e;e=r}return null}var Sr=class{get rootNodes(){let t=this._lView,n=t[N];return _o(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ut]}set context(t){this._lView[ut]=t}get destroyed(){return(this._lView[D]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ae];if(vt(t)){let n=t[co],r=n?n.indexOf(this):-1;r>-1&&(Qa(t,r),oo(n,r))}this._attachedToViewContainer=!1}ap(this._lView[N],this._lView)}onDestroy(t){Eh(this._lView,t)}markForCheck(){Rp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[D]&=-129}reattach(){Ha(this._lView),this._lView[D]|=128}detectChanges(){this._lView[D]|=1024,Mp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Va(this._lView),n=this._lView[xn];n!==null&&!t&&Rc(n,this._lView),op(this._lView[N],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=t;let n=Va(this._lView),r=this._lView[xn];r!==null&&!n&&sp(r,this._lView),Ha(this._lView)}},jc=(()=>{class e{static{this.__NG_ELEMENT_ID__=BE}}return e})(),jE=jc,VE=class extends jE{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let i=IE(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new Sr(i)}};function BE(){return kp(_t(),ce())}function kp(e,t){return e.type&4?new VE(t,e,ko(e,t)):null}var kA=new RegExp(`^(\\d+)*(${SD}|${TD})*(.*)`);var HE=()=>null;function Lf(e,t){return HE(e,t)}var Rn=class{},Vc=new _("",{providedIn:"root",factory:()=>!1});var Pp=new _(""),Op=new _(""),tc=class{},Do=class{};function $E(e){let t=Error(`No component factory found for ${me(e)}.`);return t[UE]=e,t}var UE="ngComponent";var nc=class{resolveComponentFactory(t){throw $E(t)}},Mr=class{static{this.NULL=new nc}},kn=class{};var WE=(()=>{class e{static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>null})}}return e})();function rc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=cf(i,a);else if(o==2){let c=a,l=t[++s];r=cf(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ic=class extends Mr{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Mn(t);return new Eo(n,this.ngModule)}};function jf(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let i=e[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Nt.None;t?n.push({propName:s,templateName:r,isSignal:(a&Nt.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function zE(e){let t=e.toLowerCase();return t==="svg"?I_:t==="math"?b_:null}var Eo=class extends Do{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=jf(t.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return jf(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Jv(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=L(null);try{i=i||this.ngModule;let s=i instanceof Gt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ua(t,s):t,c=a.get(kn,null);if(c===null)throw new M(407,!1);let l=a.get(WE,null),u=a.get(Rn,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",g=r?JD(f,r,this.componentDef.encapsulation,a):ip(f,h,zE(h)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let T=null;g!==null&&(T=xc(g,a,!0));let k=Oc(0,null,null,1,0,null,null,null,null,null,null),H=Lo(null,k,null,y,null,null,d,f,a,null,T);vc(H);let B,re,Ie=null;try{let Ye=this.componentDef,dn,Zs=null;Ye.findHostDirectiveDefs?(dn=[],Zs=new Map,Ye.findHostDirectiveDefs(Ye,dn,Zs),dn.push(Ye)):dn=[Ye];let Jy=GE(H,g);Ie=qE(Jy,g,Ye,dn,H,d,f),re=vh(k,ht),g&&QE(f,Ye,g,r),n!==void 0&&KE(re,this.ngContentSelectors,n),B=ZE(Ie,Ye,dn,Zs,H,[XE]),Lc(k,H,null)}catch(Ye){throw Ie!==null&&Ya(Ie),Ya(H),Ye}finally{_c()}return new oc(this.componentType,B,ko(re,H),H,re)}finally{L(o)}}},oc=class extends tc{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Sr(i,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;Fc(o[N],o,i,t,n),this.previousInputValues.set(t,n);let s=xr(this._tNode.index,o);Rp(s,1)}}get injector(){return new zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function GE(e,t){let n=e[N],r=ht;return e[r]=t,jo(n,r,2,"#host",null)}function qE(e,t,n,r,i,o,s){let a=i[N];YE(r,e,t,s);let c=null;t!==null&&(c=xc(t,i[Nn]));let l=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Lo(i,Dp(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&Xa(a,e,r.length-1),Vo(i,d),i[e.index]=d}function YE(e,t,n,r){for(let i of e)t.mergedAttrs=hc(t.mergedAttrs,i.hostAttrs);t.mergedAttrs!==null&&(rc(t,t.mergedAttrs,!0),n!==null&&fp(r,n,t))}function ZE(e,t,n,r,i,o){let s=_t(),a=i[N],c=et(s,i);wp(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Tr(i,a,d,s);Kt(f,i)}Cp(a,i,s),c&&Kt(c,i);let l=Tr(i,a,s.directiveStart+s.componentOffset,s);if(e[ut]=i[ut]=l,o!==null)for(let u of o)u(l,t);return yp(a,s,i),l}function QE(e,t,n,r){if(r)ka(e,n,["ng-version","18.2.7"]);else{let{attrs:i,classes:o}=e_(t.selectors[0]);i&&ka(e,n,i),o&&o.length>0&&dp(e,n,o.join(" "))}}function KE(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function XE(){let e=_t();Cc(ce()[N],e)}var Bc=(()=>{class e{static{this.__NG_ELEMENT_ID__=JE}}return e})();function JE(){let e=_t();return tw(e,ce())}var ew=Bc,Fp=class extends ew{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ko(this._hostTNode,this._hostLView)}get injector(){return new zt(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ic(this._hostTNode,this._hostLView);if(Fh(t)){let n=po(t,this._hostLView),r=ho(t),i=n[N].data[r+8];return new zt(i,n)}else return new zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Vf(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ae}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Lf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Ff(this._hostTNode,s)),a}createComponent(t,n,r,i,o){let s=t&&!D_(t),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?t:new Eo(Mn(t)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let y=(s?l:this.parentInjector).get(Gt,null);y&&(o=y)}let u=Mn(c.componentType??{}),d=Lf(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,Ff(this._hostTNode,d)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(M_(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[ae],l=new Fp(c,c[We],c[ae]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return bE(s,i,o,r),t.attachToViewContainerRef(),Qf(Na(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Vf(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Qa(this._lContainer,n);r&&(oo(Na(this._lContainer),n),ap(r[N],r))}detach(t){let n=this._adjustIndex(t,-1),r=Qa(this._lContainer,n);return r&&oo(Na(this._lContainer),n)!=null?new Sr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Vf(e){return e[co]}function Na(e){return e[co]||(e[co]=[])}function tw(e,t){let n,r=t[e.index];return vt(r)?n=r:(n=Ip(r,t,null,e),t[e.index]=n,Vo(t,n)),rw(n,t,e,r),new Fp(n,e,t)}function nw(e,t){let n=e[_e],r=n.createComment(""),i=et(t,e),o=lp(n,i);return vo(n,o,r,$D(n,i),!1),r}var rw=sw,iw=()=>!1;function ow(e,t,n){return iw(e,t,n)}function sw(e,t,n,r){if(e[qt])return;let i;n.type&8?i=pt(r):i=nw(t,n),e[qt]=i}function aw(e){let t=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=e(i);n.set(i,o=s.then(dw))}return o}return wo.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,f)=>{a.push(""),s.push(r(d).then(h=>{a[l+f]=h,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>fw(o));t.push(c)}),lw(),Promise.all(t).then(()=>{})}var wo=new Map,cw=new Set;function lw(){let e=wo;return wo=new Map,e}function uw(){return wo.size===0}function dw(e){return typeof e=="string"?e:e.text()}function fw(e){cw.delete(e)}var Pn=class{},sc=class{};var Co=class extends Pn{constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ic(this);let o=i_(t);this._bootstrapComponents=xD(o.bootstrap),this._r3Injector=Gh(t,n,[{provide:Pn,useValue:this},{provide:Mr,useValue:this.componentFactoryResolver},...r],me(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ac=class extends sc{constructor(t){super(),this.moduleType=t}create(t){return new Co(this.moduleType,t,[])}};function hw(e,t,n){return new Co(e,t,n,!1)}function Lp(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function pw(e){return(e.flags&32)===32}function gw(e,t,n,r,i,o,s,a,c){let l=t.consts,u=jo(t,e,4,s||null,a||null);Ep(t,n,u,fo(l,c)),Cc(t,u);let d=u.tView=Oc(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function mw(e,t,n,r,i,o,s,a,c,l){let u=n+ht,d=t.firstCreatePass?gw(u,t,e,r,i,o,s,a,c):t.data[u];Ar(d,!1);let f=yw(t,e,d,n);Ec()&&kc(t,e,f,d),Kt(f,e);let h=Ip(f,e,f,d);return e[u]=h,Vo(e,h),ow(h,d,e),fh(d)&&vp(t,e,d),c!=null&&_p(e,d,l),d}function Hc(e,t,n,r,i,o,s,a){let c=ce(),l=Fn(),u=fo(l.consts,o);return mw(c,l,e,t,n,r,i,u,s,a),Hc}var yw=vw;function vw(e,t,n,r){return wc(!0),t[_e].createComment("")}var yr=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(yr||{}),_w=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Bf=class e{constructor(){this.ngZone=V(P),this.scheduler=V(Rn),this.errorHandler=V(gt,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[yr.EarlyRead,yr.Write,yr.MixedReadWrite,yr.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&this.sequences.delete(t);for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}};function Dw(e,t,n,r){return Lp(e,Sh(),n)?t+qf(n)+r:Fo}function $c(e,t,n){let r=ce(),i=Sh();if(Lp(r,i,t)){let o=Fn(),s=G_();oE(o,s,r,e,t,r[_e],n,!1)}return $c}function Hf(e,t,n,r,i){let o=t.inputs,s=i?"class":"style";Fc(e,n,o[s],s,r)}function Ew(e,t,n,r,i,o){let s=t.consts,a=fo(s,i),c=jo(t,e,2,r,a);return Ep(t,n,c,fo(s,o)),c.attrs!==null&&rc(c,c.attrs,!1),c.mergedAttrs!==null&&rc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function te(e,t,n,r){let i=ce(),o=Fn(),s=ht+e,a=i[_e],c=o.firstCreatePass?Ew(s,o,i,t,n,r):o.data[s],l=ww(o,i,c,a,t,e);i[s]=l;let u=fh(c);return Ar(c,!0),fp(a,l,c),!pw(c)&&Ec()&&kc(o,i,l,c),A_()===0&&Kt(l,i),R_(),u&&(vp(o,i,c),yp(o,c,i)),r!==null&&_p(i,c),te}function ne(){let e=_t();bh()?j_():(e=e.parent,Ar(e,!1));let t=e;O_(t)&&F_(),k_();let n=Fn();return n.firstCreatePass&&(Cc(n,e),dh(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&K_(t)&&Hf(n,t,ce(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&X_(t)&&Hf(n,t,ce(),t.stylesWithoutHost,!1),ne}function Rr(e,t,n,r){return te(e,t,n,r),ne(),Rr}var ww=(e,t,n,r,i,o)=>(wc(!0),ip(r,i,q_()));var Io="en-US";var Cw=Io;function Iw(e){typeof e=="string"&&(Cw=e.toLowerCase().replace(/_/g,"-"))}function Uc(e=1){return z_(e)}function jp(e){let t=V_();return S_(t,ht+e)}function ye(e,t=""){let n=ce(),r=Fn(),i=e+ht,o=r.firstCreatePass?jo(r,i,1,t,null):r.data[i],s=bw(r,n,o,t,e);n[i]=s,Ec()&&kc(r,n,s,o),Ar(o,!1)}var bw=(e,t,n,r,i)=>(wc(!0),RD(t[_e],r));function Bo(e){return kr("",e,""),Bo}function kr(e,t,n){let r=ce(),i=Dw(r,e,t,n);return i!==Fo&&DE(r,Dc(),i),kr}function Vp(e,t){return kp(e,t)}var Xi=null;function Tw(e){Xi!==null&&(e.defaultEncapsulation!==Xi.defaultEncapsulation||e.preserveWhitespaces!==Xi.preserveWhitespaces)||(Xi=e)}var Xt=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Bp=new Xt("18.2.7");var Wc=new _(""),Pr=new _(""),Ho=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,zc||(Sw(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{P.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(n)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n()},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(m(P),m($o),m(Pr))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),$o=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return zc?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Sw(e){zc=e}var zc;function Gc(e){return!!e&&typeof e.then=="function"}function Hp(e){return!!e&&typeof e.subscribe=="function"}var Mw=new _(""),$p=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=V(Mw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=i();if(Gc(o))n.push(o);else if(Hp(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Nw=new _("");function xw(){Fd(()=>{throw new M(600,!1)})}function Aw(e){return e.isBoundToModule}var Rw=10;function kw(e,t,n){try{let r=n();return Gc(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function Up(e,t){return Array.isArray(t)?t.reduce(Up,e):fe(fe({},e),t)}var Vn=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(_D),this.afterRenderManager=V(_w),this.zonelessEnabled=V(Vc),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ge,this.afterTick=new ge,this.componentTypes=[],this.components=[],this.isStable=V(Ro).hasPendingTasks.pipe(ie(n=>!n)),this._injector=V(Gt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Do;if(!this._injector.get($p).done){let f=!i&&r_(n),h=!1;throw new M(405,h)}let s;i?s=n:s=this._injector.get(Mr).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=Aw(s)?void 0:this._injector.get(Pn),c=r||s.selector,l=s.create(Qt.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(Wc,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),ro(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new M(101,!1);let n=L(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,L(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(kn,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Rw;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Pw(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>xo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ro(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Nw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ro(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new M(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ro(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Pw(e,t,n,r){if(!n&&!xo(e))return;Mp(e,t,n&&!r?0:1)}var Ow=new _("");function Fw(e,t,n){let r=new ac(n);return Promise.resolve(r)}function $f(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var Lw=(()=>{class e{constructor(){this.zone=V(P),this.changeDetectionScheduler=V(Rn),this.applicationRef=V(Vn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function jw({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new P(be(fe({},Wp()),{scheduleInRootZone:n})),[{provide:P,useFactory:e},{provide:Cr,multi:!0,useFactory:()=>{let r=V(Lw,{optional:!0});return()=>r.initialize()}},{provide:Cr,multi:!0,useFactory:()=>{let r=V(Vw);return()=>{r.initialize()}}},t===!0?{provide:Pp,useValue:!0}:[],{provide:Op,useValue:n??qh}]}function Wp(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Vw=(()=>{class e{constructor(){this.subscription=new ee,this.initialized=!1,this.zone=V(P),this.pendingTasks=V(Ro)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{P.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{P.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Bw=(()=>{class e{constructor(){this.appRef=V(Vn),this.taskService=V(Ro),this.ngZone=V(P),this.zonelessEnabled=V(Vc),this.disableScheduling=V(Pp,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ee,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(mo):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(Op,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yo||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Mf:Zh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mo+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Mf(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Hw(){return typeof $localize<"u"&&$localize.locale||Io}var qc=new _("",{providedIn:"root",factory:()=>V(qc,S.Optional|S.SkipSelf)||Hw()});var Yc=new _("");function Ji(e){return!!e.platformInjector}function $w(e){let t=Ji(e)?e.r3Injector:e.moduleRef.injector,n=t.get(P);return n.run(()=>{Ji(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(gt,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Ji(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Yc);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else e.moduleRef.onDestroy(()=>{ro(e.allPlatformModules,e.moduleRef),i.unsubscribe()});return kw(r,n,()=>{let o=t.get($p);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(qc,Io);if(Iw(s||Io),Ji(e)){let a=t.get(Vn);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return Uw(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function Uw(e,t){let n=e.injector.get(Vn);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new M(-403,!1);t.push(e)}var zp=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){let i=r?.scheduleInRootZone,o=()=>vD(r?.ngZone,be(fe({},Wp({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[jw({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Rn,useExisting:Bw}],c=hw(n.moduleType,this.injector,a);return $w({moduleRef:c,allPlatformModules:this._modules})}bootstrapModule(n,r=[]){let i=Up({},r);return Fw(this.injector,i,n).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new M(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let n=this._injector.get(Yc,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(m(Qt))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),_r=null,Gp=new _("");function Ww(e){if(_r&&!_r.get(Gp,!1))throw new M(400,!1);xw(),_r=e;let t=e.get(zp);return qw(e),t}function Zc(e,t,n=[]){let r=`Platform: ${t}`,i=new _(r);return(o=[])=>{let s=qp();if(!s||s.injector.get(Gp,!1)){let a=[...n,...o,{provide:i,useValue:!0}];e?e(a):Ww(zw(a,r))}return Gw(i)}}function zw(e=[],t){return Qt.create({name:t,providers:[{provide:Mo,useValue:"platform"},{provide:Yc,useValue:new Set([()=>_r=null])},...e]})}function Gw(e){let t=qp();if(!t)throw new M(401,!1);return t}function qp(){return _r?.get(zp)??null}function qw(e){e.get(Mc,null)?.forEach(n=>n())}function Qc(){return!1}var Yp=Zc(null,"core",[]),Zp=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(m(Vn))}}static{this.\u0275mod=ke({type:e})}static{this.\u0275inj=Re({})}}return e})();var Kp=null;function zo(){return Kp}function Xp(e){Kp??=e}var Uo=class{};var xt=new _("");function Jp(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var eg=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new Kc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Qp("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Qp("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(jn(Bc),jn(jc))}}static{this.\u0275dir=th({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),Kc=class{constructor(){this.$implicit=null,this.ngIf=null}};function Qp(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${me(t)}'.`)}var tg=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=ke({type:e})}static{this.\u0275inj=Re({})}}return e})(),ng="browser",Kw="server";function Or(e){return e===Kw}var Wo=class{};var el=class extends Uo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tl=class e extends el{static makeCurrent(){Xp(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=eC();return n==null?null:tC(n)}resetBaseElement(){Fr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Jp(document.cookie,t)}},Fr=null;function eC(){return Fr=Fr||document.querySelector("base"),Fr?Fr.getAttribute("href"):null}function tC(e){return new URL(e,document.baseURI).pathname}var nl=class{addToWindow(t){mt.getAngularTestability=(r,i=!0)=>{let o=t.findTestabilityInTree(r,i);if(o==null)throw new M(5103,!1);return o},mt.getAllAngularTestabilities=()=>t.getAllTestabilities(),mt.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let i=mt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};mt.frameworkStabilizers||(mt.frameworkStabilizers=[]),mt.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let i=t.getTestability(n);return i??(r?zo().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},nC=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),rl=new _(""),sg=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new M(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(m(rl),m(P))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Go=class{constructor(t){this._doc=t}},Xc="ng-app-id",ag=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Or(o),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Xc}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Xc),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Xc,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(m(xt),m(Po),m(Nc,8),m(Pe))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Jc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ol=/%COMP%/g,cg="%COMP%",rC=`_nghost-${cg}`,iC=`_ngcontent-${cg}`,oC=!0,sC=new _("",{providedIn:"root",factory:()=>oC});function aC(e){return iC.replace(ol,e)}function cC(e){return rC.replace(ol,e)}function lg(e,t){return t.map(n=>n.replace(ol,e))}var rg=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Or(a),this.defaultRenderer=new Lr(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Je.ShadowDom&&(r=be(fe({},r),{encapsulation:Je.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof qo?i.applyToHost(n):i instanceof jr&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Je.Emulated:o=new qo(c,l,r,this.appId,u,s,a,d);break;case Je.ShadowDom:return new il(c,l,n,r,s,a,this.nonce,d);default:o=new jr(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(m(sg),m(ag),m(Po),m(sC),m(xt),m(Pe),m(P),m(Nc))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Lr=class{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Jc[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(ig(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(ig(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=Jc[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=Jc[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Jt.DashCase|Jt.Important)?t.style.setProperty(n,r,i&Jt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Jt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=zo().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function ig(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var il=class extends Lr{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=lg(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jr=class extends Lr{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?lg(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qo=class extends jr{constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=aC(l),this.hostAttr=cC(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},lC=(()=>{class e extends Go{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(m(xt))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),og=["alt","control","meta","shift"],uC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dC={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},fC=(()=>{class e extends Go{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i){let o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zo().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),og.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=uC[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),og.forEach(s=>{if(s!==i){let a=dC[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(m(xt))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})();function hC(){tl.makeCurrent()}function pC(){return new gt}function gC(){return np(document),document}var mC=[{provide:Pe,useValue:ng},{provide:Mc,useValue:hC,multi:!0},{provide:xt,useFactory:gC,deps:[]}],ug=Zc(Yp,"browser",mC),yC=new _(""),vC=[{provide:Pr,useClass:nl,deps:[]},{provide:Wc,useClass:Ho,deps:[P,$o,Pr]},{provide:Ho,useClass:Ho,deps:[P,$o,Pr]}],_C=[{provide:Mo,useValue:"root"},{provide:gt,useFactory:pC,deps:[]},{provide:rl,useClass:lC,multi:!0,deps:[xt,P,Pe]},{provide:rl,useClass:fC,multi:!0,deps:[xt]},rg,ag,sg,{provide:kn,useExisting:rg},{provide:Wo,useClass:nC,deps:[]},[]],dg=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Po,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(m(yC,12))}}static{this.\u0275mod=ke({type:e})}static{this.\u0275inj=Re({providers:[..._C,...vC],imports:[tg,Zp]})}}return e})();var EC="firebase",wC="10.14.0";It(EC,wC,"app");var Bn=new Xt("ANGULARFIRE2_VERSION");var CC=(e,t)=>{let n=t?[t]:Rd(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},en=class{constructor(){return CC(IC)}},IC="app-check";function sl(){}var Yo=class{zone;delegate;constructor(t,n=pa){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},al=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sl,{},sl,sl)),n.pipe(Da({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zo=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Yo(Zone.current)),this.insideAngular=n.run(()=>new Yo(Zone.current,hr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(m(P))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function bC(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Dt(e){return TC(bC())(e)}function TC(e){return function(n){return n=n.lift(new al(e.ngZone)),n.pipe(Be(e.outsideAngular),Ne(e.insideAngular))}}var SC="firebase",MC="10.14.0";pe.registerVersion(SC,MC,"app-compat");var NC=["ngOnDestroy"],pg=(e,t,n,r={})=>new Proxy(e,{get:(i,o)=>n.runOutsideAngular(()=>{if(e[o])return r?.spy?.get&&r.spy.get(o,e[o]),e[o];if(NC.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,d),d})})})});var Qo=class{constructor(t){return t}},Hn=new _("angularfire2.app.options"),$n=new _("angularfire2.app.name");function Vr(e,t,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=pe.apps.filter(a=>a&&a.name===i.name)[0]||t.runOutsideAngular(()=>pe.initializeApp(e,i));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;xC("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Qo(s)}var xC=(e,...t)=>{Qc()&&typeof console<"u"&&console[e](...t)},AC={provide:Qo,useFactory:Vr,deps:[Hn,P,[new dc,$n]]},gg=(()=>{class e{static initializeApp(n,r){return{ngModule:e,providers:[{provide:Hn,useValue:n},{provide:$n,useValue:r}]}}constructor(n){pe.registerVersion("angularfire",Bn.full,"core"),pe.registerVersion("angularfire",Bn.full,"app-compat"),pe.registerVersion("angular",Bp.full,n.toString())}static \u0275fac=function(r){return new(r||e)(m(Pe))};static \u0275mod=ke({type:e});static \u0275inj=Re({providers:[AC]})}return e})();function Ko(e,t,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return RC(i,s)||(hg("error",`${t} was already initialized on the ${n} Firebase App with different settings.${kC?" You may need to reload as Firebase is not HMR aware.":""}`),hg("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([e,a,i]),a}}function RC(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var kC=typeof module<"u"&&!!module.hot,hg=(e,...t)=>{Qc()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var FC=new Map,LC={activated:!1,tokenObservers:[]},jC={initialized:!1,enabled:!1};function ze(e){return FC.get(e)||Object.assign({},LC)}function Dg(){return jC}var VC="https://content-firebaseappcheck.googleapis.com/v1";var BC="exchangeDebugToken",mg={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ck=24*60*60*1e3;var ll=class{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return je(this,null,function*(){this.stop();try{this.pending=new K,this.pending.promise.catch(n=>{}),yield HC(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new K,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function HC(e){return new Promise(t=>{setTimeout(t,e)})}var $C={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},At=new Id("appCheck","AppCheck",$C);function Eg(e){if(!ze(e).activated)throw At.create("use-before-activation",{appName:e.name})}function wg(r,i){return je(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(h){throw At.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw At.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw At.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw At.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function Cg(e,t){let{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${VC}/projects/${n}/apps/${r}:${BC}?key=${i}`,body:{debug_token:t}}}var UC="firebase-app-check-database",WC=1,ul="firebase-app-check-store";var Xo=null;function zC(){return Xo||(Xo=new Promise((e,t)=>{try{let n=indexedDB.open(UC,WC);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(At.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ul,{keyPath:"compositeKey"})}}}catch(n){t(At.create("storage-open",{originalErrorMessage:n?.message}))}}),Xo)}function GC(e,t){return qC(YC(e),t)}function qC(e,t){return je(this,null,function*(){let r=(yield zC()).transaction(ul,"readwrite"),o=r.objectStore(ul).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(At.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function YC(e){return`${e.options.appId}-${e.name}`}var dl=new hn("@firebase/app-check");function cl(e,t){return Cd()?GC(e,t).catch(n=>{dl.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ig(){return Dg().enabled}function bg(){return je(this,null,function*(){let e=Dg();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var ZC={error:"UNKNOWN_ERROR"};function QC(e){return Ei.encodeString(JSON.stringify(e),!1)}function fl(e,t=!1){return je(this,null,function*(){let n=e.app;Eg(n);let r=ze(n),i=r.token,o;if(i&&!Br(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Br(c)?i=c:yield cl(n,void 0))}if(!t&&i&&Br(i))return{token:i.token};let s=!1;if(Ig()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wg(Cg(n,yield bg()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield cl(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield ze(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?dl.warn(c.message):dl.error(c),o=c}let a;return i?o?Br(i)?a={token:i.token,internalError:o}:a=vg(o):(a={token:i.token},r.token=i,yield cl(n,i)):a=vg(o),s&&eI(n,a),a})}function KC(e){return je(this,null,function*(){let t=e.app;Eg(t);let{provider:n}=ze(t);if(Ig()){let r=yield bg(),{token:i}=yield wg(Cg(t,r),e.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function XC(e,t,n,r){let{app:i}=e,o=ze(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Br(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),yg(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>yg(e))}function Tg(e,t){let n=ze(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function yg(e){let{app:t}=e,n=ze(t),r=n.tokenRefresher;r||(r=JC(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function JC(e){let{app:t}=e;return new ll(()=>je(this,null,function*(){let n=ze(t),r;if(n.token?r=yield fl(e,!0):r=yield fl(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=ze(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},mg.RETRIAL_MIN_WAIT,mg.RETRIAL_MAX_WAIT)}function eI(e,t){let n=ze(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Br(e){return e.expireTimeMillis-Date.now()>0}function vg(e){return{token:QC(ZC),error:e}}var hl=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=ze(this.app);for(let n of t)Tg(this.app,n.next);return Promise.resolve()}};function tI(e,t){return new hl(e,t)}function nI(e){return{getToken:t=>fl(e,t),getLimitedUseToken:()=>KC(e),addTokenListener:t=>XC(e,"INTERNAL",t),removeTokenListener:t=>Tg(e.app,t)}}var rI="@firebase/app-check",iI="0.8.8";var oI="app-check",_g="app-check-internal";function sI(){cr(new at(oI,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return tI(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(_g).initialize()})),cr(new at(_g,e=>{let t=e.getProvider("app-check").getImmediate();return nI(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),It(rI,iI)}sI();var aI=["localhost","0.0.0.0","127.0.0.1"],Dk=typeof window<"u"&&aI.includes(window.location.hostname);var pl=new _("angularfire2.auth.use-emulator"),gl=new _("angularfire2.auth.settings"),ml=new _("angularfire2.auth.tenant-id"),yl=new _("angularfire2.auth.langugage-code"),vl=new _("angularfire2.auth.use-device-language"),_l=new _("angularfire.auth.persistence"),Dl=(e,t,n,r,i,o,s,a)=>Ko(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),Mg=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,u,d,f,h){let g=new ge,y=Tt(void 0).pipe(Ne(s.outsideAngular),ve(()=>o.runOutsideAngular(()=>import("./chunk-YX4MRN3A.js"))),ie(()=>Vr(n,o,r)),ie(T=>Dl(T,o,a,l,u,d,c,f)),Zi({bufferSize:1,refCount:!1}));if(Or(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{y.pipe(qi()).subscribe();let T=y.pipe(ve(B=>B.getRedirectResult().then(re=>re,()=>null)),Dt,Zi({bufferSize:1,refCount:!1})),k=y.pipe(ve(B=>new z(re=>({unsubscribe:o.runOutsideAngular(()=>B.onAuthStateChanged(Ie=>re.next(Ie),Ie=>re.error(Ie),()=>re.complete()))})))),H=y.pipe(ve(B=>new z(re=>({unsubscribe:o.runOutsideAngular(()=>B.onIdTokenChanged(Ie=>re.next(Ie),Ie=>re.error(Ie),()=>re.complete()))}))));this.authState=T.pipe(Qi(k),Be(s.outsideAngular),Ne(s.insideAngular)),this.user=T.pipe(Qi(H),Be(s.outsideAngular),Ne(s.insideAngular)),this.idToken=this.user.pipe(ve(B=>B?bt(B.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(ve(B=>B?bt(B.getIdTokenResult()):Tt(null))),this.credential=En(T,g,this.authState.pipe(pr(B=>!B))).pipe(ie(B=>B?.user?B:null),Be(s.outsideAngular),Ne(s.insideAngular))}return pg(this,y,o,{spy:{apply:(T,k,H)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&H.then(B=>g.next(B))}}})}static \u0275fac=function(r){return new(r||e)(m(Hn),m($n,8),m(Pe),m(P),m(Zo),m(pl,8),m(gl,8),m(ml,8),m(yl,8),m(vl,8),m(_l,8),m(en,8))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var Ng="@firebase/database",xg="1.0.8";var Ru="";function ku(e){Ru=e}var Ml=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Y(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:wi(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Nl=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Te(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var am=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ml(t)}}catch{}return new Nl},nn=am("localStorage"),xl=am("sessionStorage");var Gn=new hn("@firebase/database"),cm=function(){let e=1;return function(){return e++}}(),lm=function(e){let t=Nd(e),n=new Md;n.update(t);let r=n.digest();return Ei.encodeByteArray(r)},ui=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=ui.apply(null,r):typeof r=="object"?t+=Y(r):t+=r,t+=" "}return t},rn=null,Ag=!0,um=function(e,t){p(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Gn.logLevel=xd.VERBOSE,rn=Gn.log.bind(Gn),t&&xl.set("logging_enabled",!0)):typeof e=="function"?rn=e:(rn=null,xl.remove("logging_enabled"))},X=function(...e){if(Ag===!0&&(Ag=!1,rn===null&&xl.get("logging_enabled")===!0&&um(!0)),rn){let t=ui.apply(null,e);rn(t)}},di=function(e){return function(...t){X(e,...t)}},Al=function(...e){let t="FIREBASE INTERNAL ERROR: "+ui(...e);Gn.error(t)},it=function(...e){let t=`FIREBASE FATAL ERROR: ${ui(...e)}`;throw Gn.error(t),new Error(t)},oe=function(...e){let t="FIREBASE WARNING: "+ui(...e);Gn.warn(t)},lI=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ts=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},uI=function(e){if(Ze()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ot="[MIN_NAME]",Et="[MAX_NAME]",sn=function(e,t){if(e===t)return 0;if(e===Ot||t===Et)return-1;if(t===Ot||e===Et)return 1;{let n=Rg(e),r=Rg(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},dI=function(e,t){return e===t?0:e<t?-1:1},Hr=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Y(t))},Pu=function(e){if(typeof e!="object"||e===null)return Y(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Y(t[r]),n+=":",n+=Pu(e[t[r]]);return n+="}",n},dm=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function J(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var fm=function(e){p(!Ts(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,i,o,s,a,c;e===0?(o=0,s=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},fI=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hI=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function pI(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var gI=new RegExp("^-?(0*)\\d{1,10}$"),mI=-2147483648,yI=2147483647,Rg=function(e){if(gI.test(e)){let t=Number(e);if(t>=mI&&t<=yI)return t}return null},tr=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw oe("Exception was thrown by user callback.",n),t},Math.floor(0))}},vI=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zr=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Rl=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var kl=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(X("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oe(t)}},Gr=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),es="5",hm="v",pm="s",gm="r",mm="f",ym=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vm="ls",_m="p",Pl="ac",Dm="websocket",Em="long_polling";var ts=class{constructor(t,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nn.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&nn.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function _I(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function wm(e,t,n){p(typeof t=="string","typeof type must == string"),p(typeof n=="object","typeof params must == object");let r;if(t===Dm)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Em)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);_I(e)&&(n.ns=e.namespace);let i=[];return J(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Ol=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Te(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return Dd(this.counters_)}};var El={},wl={};function Ou(e){let t=e.toString();return El[t]||(El[t]=new Ol),El[t]}function DI(e,t){let n=e.toString();return wl[n]||(wl[n]=t()),wl[n]}var Fl=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&tr(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var kg="start",EI="close",wI="pLPCommand",CI="pRTLPCB",Cm="id",Im="pw",bm="ser",II="cb",bI="seg",TI="ts",SI="d",MI="dframe",Tm=1870,Sm=30,NI=Tm-Sm,xI=25e3,AI=3e4,Qr=class e{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=di(t),this.stats_=Ou(n),this.urlFn=c=>(this.appCheckToken&&(c[Pl]=this.appCheckToken),wm(n,Em,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Fl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(AI)),uI(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ll((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===kg)this.id=a,this.password=c;else if(s===EI)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[kg]="t",r[bm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[II]=this.scriptTagHolder.uniqueCallbackIdentifier),r[hm]=es,this.transportSessionId&&(r[pm]=this.transportSessionId),this.lastSessionId&&(r[vm]=this.lastSessionId),this.applicationId&&(r[_m]=this.applicationId),this.appCheckToken&&(r[Pl]=this.appCheckToken),typeof location<"u"&&location.hostname&&ym.test(location.hostname)&&(r[gm]=mm);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Ze()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!fI()&&!hI()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Y(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=_d(n),i=dm(r,NI);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Ze())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[MI]="t",r[Cm]=t,r[Im]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Y(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Ll=class e{constructor(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ze())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=cm(),window[wI+this.uniqueCallbackIdentifier]=t,window[CI+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){X("frame writing exception"),a.stack&&X(a.stack),X(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||X("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[Cm]=this.myID,t[Im]=this.myPW,t[bm]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Sm+r.length<=Tm;){let s=this.pendingSegs.shift();r=r+"&"+bI+i+"="+s.seg+"&"+TI+i+"="+s.ts+"&"+SI+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(xI)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){Ze()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{X("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var RI=16384,kI=45e3,ns=null;typeof MozWebSocket<"u"?ns=MozWebSocket:typeof WebSocket<"u"&&(ns=WebSocket);var Wn=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=di(this.connId),this.stats_=Ou(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[hm]=es,!Ze()&&typeof location<"u"&&location.hostname&&ym.test(location.hostname)&&(a[gm]=mm),r&&(a[pm]=r),i&&(a[vm]=i),o&&(a[Pl]=o),s&&(a[_m]=s),wm(n,Dm,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nn.set("previous_websocket_failure",!0);try{let i;if(Ze()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${es}/${Ru}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ns(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&ns!==null&&!e.forceDisallow_}static previouslyFailed(){return nn.isInMemoryStorage||nn.get("previous_websocket_failure")===!0}markConnectionHealthy(){nn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=wi(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(p(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Y(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=dm(r,RI);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kI))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),Mm=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Qr,Wn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Wn&&Wn.isAvailable(),i=r&&!Wn.previouslyFailed();if(n.webSocketOnly&&(r||oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wn];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),PI=6e4,OI=5e3,FI=10*1024,LI=100*1024,Cl="t",Pg="d",jI="s",Og="r",VI="e",Fg="o",Lg="a",jg="n",Vg="p",BI="h",jl=class{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=di("c:"+this.id+":"),this.transportManager_=new Mm(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=zr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>LI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>FI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Cl in t){let n=t[Cl];n===Lg?this.upgradeIfSecondaryHealthy_():n===Og?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Hr("t",t),r=Hr("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Vg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Lg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Hr("t",t),r=Hr("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Hr(Cl,t);if(Pg in t){let r=t[Pg];if(n===BI){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===jg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===jI?this.onConnectionShutdown_(r):n===Og?this.onReset_(r):n===VI?Al("Server Error: "+r):n===Fg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Al("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),es!==r&&oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(PI))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(OI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Vg,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var rs=class{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var is=class{constructor(t){this.allowedEvents_=t,this.listeners_={},p(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){p(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var os=class e extends is{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return p(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var Bg=32,Hg=768,R=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function A(){return new R("")}function w(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ft(e){return e.pieces_.length-e.pieceNum_}function U(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new R(e.pieces_,t)}function Fu(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function HI(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Kr(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Nm(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new R(t,0)}function G(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof R)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new R(n,0)}function C(e){return e.pieceNum_>=e.pieces_.length}function le(e,t){let n=w(e),r=w(t);if(n===null)return t;if(n===r)return le(U(e),U(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function $I(e,t){let n=Kr(e,0),r=Kr(t,0);for(let i=0;i<n.length&&i<r.length;i++){let o=sn(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Lu(e,t){if(Ft(e)!==Ft(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Oe(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Ft(e)>Ft(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Vl=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Kr(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ar(this.parts_[r]);xm(this)}};function UI(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ar(t),xm(e)}function WI(e){let t=e.parts_.pop();e.byteLength_-=ar(t),e.parts_.length>0&&(e.byteLength_-=1)}function xm(e){if(e.byteLength_>Hg)throw new Error(e.errorPrefix_+"has a key path longer than "+Hg+" bytes ("+e.byteLength_+").");if(e.parts_.length>Bg)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bg+") or object contains a cycle "+tn(e))}function tn(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var Bl=class e extends is{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new e}getInitialEvent(t){return p(t==="visible","Unknown event type: "+t),[this.visible_]}};var $r=1e3,zI=60*5*1e3,$g=30*1e3,GI=1.3,qI=3e4,YI="server_kill",Ug=3,ju=(()=>{class e extends rs{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=di("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$r,this.maxReconnectDelay_=zI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ze())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bl.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&os.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Y(s)),p(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new K,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),p(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),p(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Te(n,"w")){let i=Ct(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Td(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$g)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=bd(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),p(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Y(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Al("Unrecognized action received from server: "+Y(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){p(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>qI&&(this.reconnectDelay_=$r),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*GI)}this.onConnectStatus_(!1)}establishConnection_(){return je(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){p(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?X("getToken() completed but was canceled"):(X("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new jl(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{oe(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(YI)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&oe(f),l())}}})}interrupt(n){X("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){X("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ci(this.interruptReasons_)&&(this.reconnectDelay_=$r,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Pu(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new R(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){X("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ug&&(this.reconnectDelay_=$g,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){X("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ug&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ze()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ru.replace(/\./g,"-")]=1,Qs()?n["framework.cordova"]=1:wd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=os.getInstance().currentlyOnline();return Ci(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),b=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var qn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new b(Ot,t),i=new b(Ot,n);return this.compare(r,i)!==0}minPost(){return b.MIN}};var Jo,ss=class extends qn{static get __EMPTY_NODE(){return Jo}static set __EMPTY_NODE(t){Jo=t}compare(t,n){return sn(t.name,n.name)}isDefinedOn(t){throw fn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return b.MIN}maxPost(){return new b(Et,Jo)}makePost(t,n){return p(typeof t=="string","KeyIndex indexValue must always be a string."),new b(t,Jo)}toString(){return".key"}},rt=new ss;var zn=class{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?r(t.key,n):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ge=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Fe.EMPTY_NODE,this.right=s??Fe.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fe.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Fe.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),Hl=class{copy(t,n,r,i,o){return this}insert(t,n,r){return new Ge(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Fe=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ge.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ge.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new zn(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new zn(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new zn(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new zn(this.root_,null,this.comparator_,!0,t)}};Fe.EMPTY_NODE=new Hl;function ZI(e,t){return sn(e.name,t.name)}function Vu(e,t){return sn(e,t)}var $l;function QI(e){$l=e}var Am=function(e){return typeof e=="number"?"number:"+fm(e):"string:"+e},Rm=function(e){if(e.isLeafNode()){let t=e.val();p(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Te(t,".sv"),"Priority must be a string or number.")}else p(e===$l||e.isEmpty(),"priority of unexpected type.");p(e===$l||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Wg,Yn=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,p(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Rm(this.priorityNode_)}static set __childrenNodeConstructor(n){Wg=n}static get __childrenNodeConstructor(){return Wg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return C(n)?this:w(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=w(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(p(i!==".priority"||Ft(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(U(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Am(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=fm(this.value_):n+=this.value_,this.lazyHash_=lm(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(p(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return p(o>=0,"Unknown leaf type: "+r),p(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),km,Pm;function KI(e){km=e}function XI(e){Pm=e}var Ul=class extends qn{compare(t,n){let r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?sn(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return b.MIN}maxPost(){return new b(Et,new Yn("[PRIORITY-POST]",Pm))}makePost(t,n){let r=km(t);return new b(n,new Yn("[PRIORITY-POST]",r))}toString(){return".priority"}},W=new Ul;var JI=Math.log(2),Wl=class{constructor(t){let n=o=>parseInt(Math.log(o)/JI,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},as=function(e,t,n,r){e.sort(t);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=e[c],f=n?n(d):d,new Ge(f,d.node,Ge.BLACK,null,null);{let h=parseInt(u/2,10)+c,g=i(c,h),y=i(h+1,l);return d=e[h],f=n?n(d):d,new Ge(f,d.node,Ge.BLACK,g,y)}},o=function(c){let l=null,u=null,d=e.length,f=function(g,y){let T=d-g,k=d;d-=g;let H=i(T+1,k),B=e[T],re=n?n(B):B;h(new Ge(re,B.node,y,null,H))},h=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let y=c.nextBitIsOne(),T=Math.pow(2,c.count-(g+1));y?f(T,Ge.BLACK):(f(T,Ge.BLACK),f(T,Ge.RED))}return u},s=new Wl(e.length),a=o(s);return new Fe(r||t,a)};var Il,Un={},Zn=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return p(Un&&W,"ChildrenNode.ts has not been loaded"),Il=Il||new e({".priority":Un},{".priority":W}),Il}get(t){let n=Ct(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Fe?n:null}hasIndex(t){return Te(this.indexSet_,t.toString())}addIndex(t,n){p(t!==rt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(b.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=as(r,t.getCompare()):a=Un;let c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;let u=Object.assign({},this.indexes_);return u[c]=a,new e(u,l)}addToIndexes(t,n){let r=sr(this.indexes_,(i,o)=>{let s=Ct(this.indexSet_,o);if(p(s,"Missing index implementation for "+o),i===Un)if(s.isDefinedOn(t.node)){let a=[],c=n.getIterator(b.Wrap),l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),as(a,s.getCompare())}else return Un;else{let a=n.get(t.name),c=i;return a&&(c=c.remove(new b(t.name,a))),c.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=sr(this.indexes_,i=>{if(i===Un)return i;{let o=n.get(t.name);return o?i.remove(new b(t.name,o)):i}});return new e(r,this.indexSet_)}};var Ur,E=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Rm(this.priorityNode_),this.children_.isEmpty()&&p(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ur||(Ur=new e(new Fe(Vu),null,Zn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ur}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ur:r}}getChild(n){let r=w(n);return r===null?this:this.getImmediateChild(r).getChild(U(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(p(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new b(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ur:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){let i=w(n);if(i===null)return r;{p(w(n)!==".priority"||Ft(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(U(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(W,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Am(this.getPriority().val())+":"),this.forEachChild(W,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":lm(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new b(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new b(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new b(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,b.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,b.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===fi?-1:0}withIndex(n){if(n===rt||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===rt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(W),o=r.getIterator(W),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===rt?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),zl=class extends E{constructor(){super(new Fe(Vu),E.EMPTY_NODE,Zn.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return E.EMPTY_NODE}isEmpty(){return!1}},fi=new zl;Object.defineProperties(b,{MIN:{value:new b(Ot,E.EMPTY_NODE)},MAX:{value:new b(Et,fi)}});ss.__EMPTY_NODE=E.EMPTY_NODE;Yn.__childrenNodeConstructor=E;QI(fi);XI(fi);var eb=!0;function q(e,t=null){if(e===null)return E.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),p(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Yn(n,q(t))}if(!(e instanceof Array)&&eb){let n=[],r=!1;if(J(e,(s,a)=>{if(s.substring(0,1)!=="."){let c=q(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new b(s,c)))}}),n.length===0)return E.EMPTY_NODE;let o=as(n,ZI,s=>s.name,Vu);if(r){let s=as(n,W.getCompare());return new E(o,q(t),new Zn({".priority":s},{".priority":W}))}else return new E(o,q(t),Zn.Default)}else{let n=E.EMPTY_NODE;return J(e,(r,i)=>{if(Te(e,r)&&r.substring(0,1)!=="."){let o=q(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(q(t))}}KI(q);var Xr=class extends qn{constructor(t){super(),this.indexPath_=t,p(!C(t)&&w(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?sn(t.name,n.name):o}makePost(t,n){let r=q(t),i=E.EMPTY_NODE.updateChild(this.indexPath_,r);return new b(n,i)}maxPost(){let t=E.EMPTY_NODE.updateChild(this.indexPath_,fi);return new b(Et,t)}toString(){return Kr(this.indexPath_,0).join("/")}};var Gl=class extends qn{compare(t,n){let r=t.node.compareTo(n.node);return r===0?sn(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return b.MIN}maxPost(){return b.MAX}makePost(t,n){let r=q(t);return new b(n,r)}toString(){return".value"}},Bu=new Gl;function Om(e){return{type:"value",snapshotNode:e}}function Qn(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Jr(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ei(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function tb(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var ti=class{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){p(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(Jr(n,a)):p(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Qn(n,r)):s.trackChildChange(ei(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(W,(i,o)=>{n.hasChild(i)||r.trackChildChange(Jr(i,o))}),n.isLeafNode()||n.forEachChild(W,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(ei(i,o,s))}else r.trackChildChange(Qn(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?E.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var cs=class e{constructor(t){this.indexedFilter_=new ti(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,s){return this.matches(new b(n,r))||(r=E.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=E.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(E.EMPTY_NODE);let o=this;return n.forEachChild(W,(s,a)=>{o.matches(new b(s,a))||(i=i.updateImmediateChild(s,E.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var ql=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new cs(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new b(n,r))||(r=E.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=E.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=E.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(E.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,E.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=t;p(a.numChildren()===this.limit_,"");let c=new b(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ei(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Jr(n,d));let y=a.updateImmediateChild(n,E.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(Qn(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return r.isEmpty()?t:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Jr(l.name,l.node)),o.trackChildChange(Qn(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,E.EMPTY_NODE)):t}};var ni=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=W}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return p(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return p(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ot}hasEnd(){return this.endSet_}getIndexEndValue(){return p(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return p(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Et}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return p(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===W}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function nb(e){return e.loadsAllData()?new ti(e.getIndex()):e.hasLimit()?new ql(e):new cs(e)}function rb(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function ib(e,t){let n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Yl(e,t,n){let r=e.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ob(e,t,n){let r;return e.index_===rt||n?r=Yl(e,t,n):r=Yl(e,t,Et),r.startAfterSet_=!0,r}function Zl(e,t,n){let r=e.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function sb(e,t,n){let r;return e.index_===rt||n?r=Zl(e,t,n):r=Zl(e,t,Ot),r.endBeforeSet_=!0,r}function Ss(e,t){let n=e.copy();return n.index_=t,n}function zg(e){let t={};if(e.isDefault())return t;let n;if(e.index_===W?n="$priority":e.index_===Bu?n="$value":e.index_===rt?n="$key":(p(e.index_ instanceof Xr,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Y(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Y(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Y(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Y(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Y(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Gg(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==W&&(t.i=e.index_.toString()),t}var Ql=class e extends rs{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=di("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(p(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,r),a={};this.listens_[s]=a;let c=zg(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Ct(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=zg(t._queryParams),r=t._path.toString(),i=new K;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Sd(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=wi(a.responseText)}catch{oe("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&oe("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var Kl=class{constructor(){this.rootNode_=E.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function ls(){return{value:null,children:new Map}}function nr(e,t,n){if(C(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=w(t);e.children.has(r)||e.children.set(r,ls());let i=e.children.get(r);t=U(t),nr(i,t,n)}}function Xl(e,t){if(C(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{let n=e.value;return e.value=null,n.forEachChild(W,(r,i)=>{nr(e,new R(r),i)}),Xl(e,t)}}else if(e.children.size>0){let n=w(t);return t=U(t),e.children.has(n)&&Xl(e.children.get(n),t)&&e.children.delete(n),e.children.size===0}else return!0}function Jl(e,t,n){e.value!==null?n(t,e.value):ab(e,(r,i)=>{let o=new R(t.toString()+"/"+r);Jl(i,o,n)})}function ab(e,t){e.children.forEach((n,r)=>{t(r,n)})}var eu=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&J(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}};var qg=10*1e3,cb=30*1e3,lb=5*60*1e3,tu=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new eu(t);let r=qg+(cb-qg)*Math.random();zr(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;J(t,(i,o)=>{o>0&&Te(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),zr(this.reportStats_.bind(this),Math.floor(Math.random()*2*lb))}};var nt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(nt||{});function Hu(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $u(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Uu(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var nu=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=nt.ACK_USER_WRITE,this.source=Hu()}operationForChild(t){if(C(this.path)){if(this.affectedTree.value!=null)return p(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new R(t));return new e(A(),n,this.revert)}}else return p(w(this.path)===t,"operationForChild called for unrelated child."),new e(U(this.path),this.affectedTree,this.revert)}};var us=class e{constructor(t,n){this.source=t,this.path=n,this.type=nt.LISTEN_COMPLETE}operationForChild(t){return C(this.path)?new e(this.source,A()):new e(this.source,U(this.path))}};var Kn=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=nt.OVERWRITE}operationForChild(t){return C(this.path)?new e(this.source,A(),this.snap.getImmediateChild(t)):new e(this.source,U(this.path),this.snap)}};var ri=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=nt.MERGE}operationForChild(t){if(C(this.path)){let n=this.children.subtree(new R(t));return n.isEmpty()?null:n.value?new Kn(this.source,A(),n.value):new e(this.source,A(),n)}else return p(w(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,U(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ot=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(C(t))return this.isFullyInitialized()&&!this.filtered_;let n=w(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var ru=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function ub(e,t,n,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(tb(s.childName,s.snapshotNode))}),Wr(e,i,"child_removed",t,r,n),Wr(e,i,"child_added",t,r,n),Wr(e,i,"child_moved",o,r,n),Wr(e,i,"child_changed",t,r,n),Wr(e,i,"value",t,r,n),i}function Wr(e,t,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>fb(e,a,c)),s.forEach(a=>{let c=db(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function db(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function fb(e,t,n){if(t.childName==null||n.childName==null)throw fn("Should only compare child_ events.");let r=new b(t.childName,t.snapshotNode),i=new b(n.childName,n.snapshotNode);return e.index_.compare(r,i)}function Ms(e,t){return{eventCache:e,serverCache:t}}function qr(e,t,n,r){return Ms(new ot(t,n,r),e.serverCache)}function Fm(e,t,n,r){return Ms(e.eventCache,new ot(t,n,r))}function ds(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function on(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var bl,hb=()=>(bl||(bl=new Fe(dI)),bl),ue=class e{constructor(t,n=hb()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return J(t,(r,i)=>{n=n.set(new R(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:A(),value:this.value};if(C(t))return null;{let r=w(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(U(t),n);return o!=null?{path:G(new R(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(C(t))return this;{let n=w(t),r=this.children.get(n);return r!==null?r.subtree(U(t)):new e(null)}}set(t,n){if(C(t))return new e(n,this.children);{let r=w(t),o=(this.children.get(r)||new e(null)).set(U(t),n),s=this.children.insert(r,o);return new e(this.value,s)}}remove(t){if(C(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=w(t),r=this.children.get(n);if(r){let i=r.remove(U(t)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(C(t))return this.value;{let n=w(t),r=this.children.get(n);return r?r.get(U(t)):null}}setTree(t,n){if(C(t))return n;{let r=w(t),o=(this.children.get(r)||new e(null)).setTree(U(t),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new e(this.value,s)}}fold(t){return this.fold_(A(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(G(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,A(),n)}findOnPath_(t,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(C(t))return null;{let o=w(t),s=this.children.get(o);return s?s.findOnPath_(U(t),G(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,A(),n)}foreachOnPath_(t,n,r){if(C(t))return this;{this.value&&r(n,this.value);let i=w(t),o=this.children.get(i);return o?o.foreachOnPath_(U(t),G(n,i),r):new e(null)}}foreach(t){this.foreach_(A(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(G(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var qe=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new ue(null))}};function Yr(e,t,n){if(C(t))return new qe(new ue(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=le(i,t);return o=o.updateChild(s,n),new qe(e.writeTree_.set(i,o))}else{let i=new ue(n),o=e.writeTree_.setTree(t,i);return new qe(o)}}}function iu(e,t,n){let r=e;return J(n,(i,o)=>{r=Yr(r,G(t,i),o)}),r}function Yg(e,t){if(C(t))return qe.empty();{let n=e.writeTree_.setTree(t,new ue(null));return new qe(n)}}function ou(e,t){return an(e,t)!=null}function an(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(le(n.path,t)):null}function Zg(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(W,(r,i)=>{t.push(new b(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new b(r,i.value))}),t}function kt(e,t){if(C(t))return e;{let n=an(e,t);return n!=null?new qe(new ue(n)):new qe(e.writeTree_.subtree(t))}}function su(e){return e.writeTree_.isEmpty()}function Xn(e,t){return Lm(A(),e.writeTree_,t)}function Lm(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(p(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=Lm(G(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(G(e,".priority"),r)),n}}function Ns(e,t){return Hm(t,e)}function pb(e,t,n,r,i){p(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Yr(e.visibleWrites,t,n)),e.lastWriteId=r}function gb(e,t,n,r){p(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=iu(e.visibleWrites,t,n),e.lastWriteId=r}function mb(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function yb(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);p(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&vb(a,r.path)?i=!1:Oe(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return _b(e),!0;if(r.snap)e.visibleWrites=Yg(e.visibleWrites,r.path);else{let a=r.children;J(a,c=>{e.visibleWrites=Yg(e.visibleWrites,G(r.path,c))})}return!0}else return!1}function vb(e,t){if(e.snap)return Oe(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Oe(G(e.path,n),t))return!0;return!1}function _b(e){e.visibleWrites=jm(e.allWrites,Db,A()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Db(e){return e.visible}function jm(e,t,n){let r=qe.empty();for(let i=0;i<e.length;++i){let o=e[i];if(t(o)){let s=o.path,a;if(o.snap)Oe(n,s)?(a=le(n,s),r=Yr(r,a,o.snap)):Oe(s,n)&&(a=le(s,n),r=Yr(r,A(),o.snap.getChild(a)));else if(o.children){if(Oe(n,s))a=le(n,s),r=iu(r,a,o.children);else if(Oe(s,n))if(a=le(s,n),C(a))r=iu(r,A(),o.children);else{let c=Ct(o.children,w(a));if(c){let l=c.getChild(U(a));r=Yr(r,A(),l)}}}else throw fn("WriteRecord should have .snap or .children")}}return r}function Vm(e,t,n,r,i){if(!r&&!i){let o=an(e.visibleWrites,t);if(o!=null)return o;{let s=kt(e.visibleWrites,t);if(su(s))return n;if(n==null&&!ou(s,A()))return null;{let a=n||E.EMPTY_NODE;return Xn(s,a)}}}else{let o=kt(e.visibleWrites,t);if(!i&&su(o))return n;if(!i&&n==null&&!ou(o,A()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Oe(l.path,t)||Oe(t,l.path))},a=jm(e.allWrites,s,t),c=n||E.EMPTY_NODE;return Xn(a,c)}}}function Eb(e,t,n){let r=E.EMPTY_NODE,i=an(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(W,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=kt(e.visibleWrites,t);return n.forEachChild(W,(s,a)=>{let c=Xn(kt(o,new R(s)),a);r=r.updateImmediateChild(s,c)}),Zg(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=kt(e.visibleWrites,t);return Zg(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function wb(e,t,n,r,i){p(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=G(t,n);if(ou(e.visibleWrites,o))return null;{let s=kt(e.visibleWrites,o);return su(s)?i.getChild(n):Xn(s,i.getChild(n))}}function Cb(e,t,n,r){let i=G(t,n),o=an(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=kt(e.visibleWrites,i);return Xn(s,r.getNode().getImmediateChild(n))}else return null}function Ib(e,t){return an(e.visibleWrites,t)}function bb(e,t,n,r,i,o,s){let a,c=kt(e.visibleWrites,t),l=an(c,A());if(l!=null)a=l;else if(n!=null)a=Xn(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function Tb(){return{visibleWrites:qe.empty(),allWrites:[],lastWriteId:-1}}function fs(e,t,n,r){return Vm(e.writeTree,e.treePath,t,n,r)}function Wu(e,t){return Eb(e.writeTree,e.treePath,t)}function Qg(e,t,n,r){return wb(e.writeTree,e.treePath,t,n,r)}function hs(e,t){return Ib(e.writeTree,G(e.treePath,t))}function Sb(e,t,n,r,i,o){return bb(e.writeTree,e.treePath,t,n,r,i,o)}function zu(e,t,n){return Cb(e.writeTree,e.treePath,t,n)}function Bm(e,t){return Hm(G(e.treePath,t),e.writeTree)}function Hm(e,t){return{treePath:e,writeTree:t}}var au=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;p(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),p(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,ei(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Jr(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,Qn(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,ei(r,t.snapshotNode,i.oldSnap));else throw fn("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var cu=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},$m=new cu,ii=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new ot(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zu(this.writes_,t,r)}}getChildAfterChild(t,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:on(this.viewCache_),o=Sb(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}};function Mb(e){return{filter:e}}function Nb(e,t){p(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),p(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function xb(e,t,n,r,i){let o=new au,s,a;if(n.type===nt.OVERWRITE){let l=n;l.source.fromUser?s=lu(e,t,l.path,l.snap,r,i,o):(p(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!C(l.path),s=ps(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===nt.MERGE){let l=n;l.source.fromUser?s=Rb(e,t,l.path,l.children,r,i,o):(p(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=uu(e,t,l.path,l.children,r,i,a,o))}else if(n.type===nt.ACK_USER_WRITE){let l=n;l.revert?s=Ob(e,t,l.path,r,i,o):s=kb(e,t,l.path,l.affectedTree,r,i,o)}else if(n.type===nt.LISTEN_COMPLETE)s=Pb(e,t,n.path,r,o);else throw fn("Unknown operation type: "+n.type);let c=o.getChanges();return Ab(t,s,c),{viewCache:s,changes:c}}function Ab(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=ds(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Om(ds(t)))}}function Um(e,t,n,r,i,o){let s=t.eventCache;if(hs(r,n)!=null)return t;{let a,c;if(C(n))if(p(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let l=on(t),u=l instanceof E?l:E.EMPTY_NODE,d=Wu(r,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let l=fs(r,on(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{let l=w(n);if(l===".priority"){p(Ft(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=t.serverCache.getNode();let d=Qg(r,n,u,c);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=U(n),d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();let f=Qg(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=zu(r,l,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return qr(t,a,s.isFullyInitialized()||C(n),e.filter.filtersNodes())}}function ps(e,t,n,r,i,o,s,a){let c=t.serverCache,l,u=s?e.filter:e.filter.getIndexedFilter();if(C(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=w(n);if(!c.isCompleteForPath(n)&&Ft(n)>1)return t;let g=U(n),T=c.getNode().getImmediateChild(h).updateChild(g,r);h===".priority"?l=u.updatePriority(c.getNode(),T):l=u.updateChild(c.getNode(),h,T,g,$m,null)}let d=Fm(t,l,c.isFullyInitialized()||C(n),u.filtersNodes()),f=new ii(i,d,o);return Um(e,d,n,i,f,a)}function lu(e,t,n,r,i,o,s){let a=t.eventCache,c,l,u=new ii(i,t,o);if(C(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=qr(t,l,!0,e.filter.filtersNodes());else{let d=w(n);if(d===".priority")l=e.filter.updatePriority(t.eventCache.getNode(),r),c=qr(t,l,a.isFullyInitialized(),a.isFiltered());else{let f=U(n),h=a.getNode().getImmediateChild(d),g;if(C(f))g=r;else{let y=u.getCompleteChild(d);y!=null?Fu(f)===".priority"&&y.getChild(Nm(f)).isEmpty()?g=y:g=y.updateChild(f,r):g=E.EMPTY_NODE}if(h.equals(g))c=t;else{let y=e.filter.updateChild(a.getNode(),d,g,f,u,s);c=qr(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function Kg(e,t){return e.eventCache.isCompleteForChild(t)}function Rb(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{let u=G(n,c);Kg(t,w(u))&&(a=lu(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=G(n,c);Kg(t,w(u))||(a=lu(e,a,u,l,i,o,s))}),a}function Xg(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function uu(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,l;C(n)?l=r:l=new ue(null).setTree(n,r);let u=t.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=t.serverCache.getNode().getImmediateChild(d),g=Xg(e,h,f);c=ps(e,c,new R(d),g,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!t.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let g=t.serverCache.getNode().getImmediateChild(d),y=Xg(e,g,f);c=ps(e,c,new R(d),y,i,o,s,a)}}),c}function kb(e,t,n,r,i,o,s){if(hs(i,n)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(r.value!=null){if(C(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ps(e,t,n,c.getNode().getChild(n),i,o,a,s);if(C(n)){let l=new ue(null);return c.getNode().forEachChild(rt,(u,d)=>{l=l.set(new R(u),d)}),uu(e,t,n,l,i,o,a,s)}else return t}else{let l=new ue(null);return r.foreach((u,d)=>{let f=G(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),uu(e,t,n,l,i,o,a,s)}}function Pb(e,t,n,r,i){let o=t.serverCache,s=Fm(t,o.getNode(),o.isFullyInitialized()||C(n),o.isFiltered());return Um(e,s,n,r,$m,i)}function Ob(e,t,n,r,i,o){let s;if(hs(r,n)!=null)return t;{let a=new ii(r,t,i),c=t.eventCache.getNode(),l;if(C(n)||w(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=fs(r,on(t));else{let d=t.serverCache.getNode();p(d instanceof E,"serverChildren would be complete if leaf node"),u=Wu(r,d)}u=u,l=e.filter.updateFullNode(c,u,o)}else{let u=w(n),d=zu(r,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=e.filter.updateChild(c,u,d,U(n),a,o):t.eventCache.getNode().hasChild(u)?l=e.filter.updateChild(c,u,E.EMPTY_NODE,U(n),a,o):l=c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=fs(r,on(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||hs(r,A())!=null,qr(t,l,s,e.filter.filtersNodes())}}var du=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new ti(r.getIndex()),o=nb(r);this.processor_=Mb(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(E.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(E.EMPTY_NODE,a.getNode(),null),u=new ot(c,s.isFullyInitialized(),i.filtersNodes()),d=new ot(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ms(d,u),this.eventGenerator_=new ru(this.query_)}get query(){return this.query_}};function Fb(e){return e.viewCache_.serverCache.getNode()}function Lb(e){return ds(e.viewCache_)}function jb(e,t){let n=on(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!C(t)&&!n.getImmediateChild(w(t)).isEmpty())?n.getChild(t):null}function Jg(e){return e.eventRegistrations_.length===0}function Vb(e,t){e.eventRegistrations_.push(t)}function em(e,t,n){let r=[];if(n){p(t==null,"A cancel should cancel all event registrations.");let i=e.query._path;e.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){let s=e.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function tm(e,t,n,r){t.type===nt.MERGE&&t.source.queryId!==null&&(p(on(e.viewCache_),"We should always have a full cache before handling merges"),p(ds(e.viewCache_),"Missing event cache, even though we have a server cache"));let i=e.viewCache_,o=xb(e.processor_,i,t,n,r);return Nb(e.processor_,o.viewCache),p(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,Wm(e,o.changes,o.viewCache.eventCache.getNode(),null)}function Bb(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(W,(o,s)=>{r.push(Qn(o,s))}),n.isFullyInitialized()&&r.push(Om(n.getNode())),Wm(e,r,n.getNode(),t)}function Wm(e,t,n,r){let i=r?[r]:e.eventRegistrations_;return ub(e.eventGenerator_,t,n,i)}var gs,ms=class{constructor(){this.views=new Map}};function Hb(e){p(!gs,"__referenceConstructor has already been defined"),gs=e}function $b(){return p(gs,"Reference.ts has not been loaded"),gs}function Ub(e){return e.views.size===0}function Gu(e,t,n,r){let i=t.source.queryId;if(i!==null){let o=e.views.get(i);return p(o!=null,"SyncTree gave us an op for an invalid query."),tm(o,t,n,r)}else{let o=[];for(let s of e.views.values())o=o.concat(tm(s,t,n,r));return o}}function zm(e,t,n,r,i){let o=t._queryIdentifier,s=e.views.get(o);if(!s){let a=fs(n,i?r:null),c=!1;a?c=!0:r instanceof E?(a=Wu(n,r),c=!1):(a=E.EMPTY_NODE,c=!1);let l=Ms(new ot(a,c,!1),new ot(r,i,!1));return new du(t,l)}return s}function Wb(e,t,n,r,i,o){let s=zm(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),Vb(s,n),Bb(s,n)}function zb(e,t,n,r){let i=t._queryIdentifier,o=[],s=[],a=Lt(e);if(i==="default")for(let[c,l]of e.views.entries())s=s.concat(em(l,n,r)),Jg(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=e.views.get(i);c&&(s=s.concat(em(c,n,r)),Jg(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Lt(e)&&o.push(new($b())(t._repo,t._path)),{removed:o,events:s}}function Gm(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Pt(e,t){let n=null;for(let r of e.views.values())n=n||jb(r,t);return n}function qm(e,t){if(t._queryParams.loadsAllData())return xs(e);{let r=t._queryIdentifier;return e.views.get(r)}}function Ym(e,t){return qm(e,t)!=null}function Lt(e){return xs(e)!=null}function xs(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var ys;function Gb(e){p(!ys,"__referenceConstructor has already been defined"),ys=e}function qb(){return p(ys,"Reference.ts has not been loaded"),ys}var Yb=1,vs=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ue(null),this.pendingWriteTree_=Tb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function qu(e,t,n,r,i){return pb(e.pendingWriteTree_,t,n,r,i),i?rr(e,new Kn(Hu(),t,n)):[]}function Zb(e,t,n,r){gb(e.pendingWriteTree_,t,n,r);let i=ue.fromObject(n);return rr(e,new ri(Hu(),t,i))}function Rt(e,t,n=!1){let r=mb(e.pendingWriteTree_,t);if(yb(e.pendingWriteTree_,t)){let o=new ue(null);return r.snap!=null?o=o.set(A(),!0):J(r.children,s=>{o=o.set(new R(s),!0)}),rr(e,new nu(r.path,o,n))}else return[]}function hi(e,t,n){return rr(e,new Kn($u(),t,n))}function Qb(e,t,n){let r=ue.fromObject(n);return rr(e,new ri($u(),t,r))}function Kb(e,t){return rr(e,new us($u(),t))}function Xb(e,t,n){let r=Yu(e,n);if(r){let i=Zu(r),o=i.path,s=i.queryId,a=le(o,t),c=new us(Uu(s),a);return Qu(e,o,c)}else return[]}function _s(e,t,n,r,i=!1){let o=t._path,s=e.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||Ym(s,t))){let c=zb(s,t,n,r);Ub(s)&&(e.syncPointTree_=e.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=e.syncPointTree_.findOnPath(o,(f,h)=>Lt(h));if(u&&!d){let f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=t0(f);for(let g=0;g<h.length;++g){let y=h[g],T=y.query,k=Xm(e,y);e.listenProvider_.startListening(Zr(T),oi(e,T),k.hashFn,k.onComplete)}}}!d&&l.length>0&&!r&&(u?e.listenProvider_.stopListening(Zr(t),null):l.forEach(f=>{let h=e.queryToTagMap.get(Rs(f));e.listenProvider_.stopListening(Zr(f),h)}))}n0(e,l)}return a}function Zm(e,t,n,r){let i=Yu(e,r);if(i!=null){let o=Zu(i),s=o.path,a=o.queryId,c=le(s,t),l=new Kn(Uu(a),c,n);return Qu(e,s,l)}else return[]}function Jb(e,t,n,r){let i=Yu(e,r);if(i){let o=Zu(i),s=o.path,a=o.queryId,c=le(s,t),l=ue.fromObject(n),u=new ri(Uu(a),c,l);return Qu(e,s,u)}else return[]}function fu(e,t,n,r=!1){let i=t._path,o=null,s=!1;e.syncPointTree_.foreachOnPath(i,(f,h)=>{let g=le(f,i);o=o||Pt(h,g),s=s||Lt(h)});let a=e.syncPointTree_.get(i);a?(s=s||Lt(a),o=o||Pt(a,A())):(a=new ms,e.syncPointTree_=e.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=E.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((h,g)=>{let y=Pt(g,A());y&&(o=o.updateImmediateChild(h,y))}));let l=Ym(a,t);if(!l&&!t._queryParams.loadsAllData()){let f=Rs(t);p(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=r0();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}let u=Ns(e.pendingWriteTree_,i),d=Wb(a,t,n,u,o,c);if(!l&&!s&&!r){let f=qm(a,t);d=d.concat(i0(e,t,f))}return d}function As(e,t,n){let i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let c=le(s,t),l=Pt(a,c);if(l)return l});return Vm(i,t,o,n,!0)}function e0(e,t){let n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=le(l,n);r=r||Pt(u,d)});let i=e.syncPointTree_.get(n);i?r=r||Pt(i,A()):(i=new ms,e.syncPointTree_=e.syncPointTree_.set(n,i));let o=r!=null,s=o?new ot(r,!0,!1):null,a=Ns(e.pendingWriteTree_,t._path),c=zm(i,t,a,o?s.getNode():E.EMPTY_NODE,o);return Lb(c)}function rr(e,t){return Qm(t,e.syncPointTree_,null,Ns(e.pendingWriteTree_,A()))}function Qm(e,t,n,r){if(C(e.path))return Km(e,t,n,r);{let i=t.get(A());n==null&&i!=null&&(n=Pt(i,A()));let o=[],s=w(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=Bm(r,s);o=o.concat(Qm(a,c,l,u))}return i&&(o=o.concat(Gu(i,e,r,n))),o}}function Km(e,t,n,r){let i=t.get(A());n==null&&i!=null&&(n=Pt(i,A()));let o=[];return t.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=Bm(r,s),u=e.operationForChild(s);u&&(o=o.concat(Km(u,a,c,l)))}),i&&(o=o.concat(Gu(i,e,r,n))),o}function Xm(e,t){let n=t.query,r=oi(e,n);return{hashFn:()=>(Fb(t)||E.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Xb(e,n._path,r):Kb(e,n._path);{let o=pI(i,n);return _s(e,n,null,o)}}}}function oi(e,t){let n=Rs(t);return e.queryToTagMap.get(n)}function Rs(e){return e._path.toString()+"$"+e._queryIdentifier}function Yu(e,t){return e.tagToQueryMap.get(t)}function Zu(e){let t=e.indexOf("$");return p(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new R(e.substr(0,t))}}function Qu(e,t,n){let r=e.syncPointTree_.get(t);p(r,"Missing sync point for query tag that we're tracking");let i=Ns(e.pendingWriteTree_,t);return Gu(r,n,i,null)}function t0(e){return e.fold((t,n,r)=>{if(n&&Lt(n))return[xs(n)];{let i=[];return n&&(i=Gm(n)),J(r,(o,s)=>{i=i.concat(s)}),i}})}function Zr(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(qb())(e._repo,e._path):e}function n0(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let i=Rs(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function r0(){return Yb++}function i0(e,t,n){let r=t._path,i=oi(e,t),o=Xm(e,n),s=e.listenProvider_.startListening(Zr(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)p(!Lt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!C(l)&&u&&Lt(u))return[xs(u).query];{let f=[];return u&&(f=f.concat(Gm(u).map(h=>h.query))),J(d,(h,g)=>{f=f.concat(g)}),f}});for(let l=0;l<c.length;++l){let u=c[l];e.listenProvider_.stopListening(Zr(u),oi(e,u))}}return s}var hu=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},pu=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=G(this.path_,t);return new e(this.syncTree_,n)}node(){return As(this.syncTree_,this.path_)}},o0=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},nm=function(e,t,n){if(!e||typeof e!="object")return e;if(p(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return s0(e[".sv"],t,n);if(typeof e[".sv"]=="object")return a0(e[".sv"],t);p(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},s0=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:p(!1,"Unexpected server value: "+e)}},a0=function(e,t,n){e.hasOwnProperty("increment")||p(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&p(!1,"Unexpected increment value: "+r);let i=t.node();if(p(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},Jm=function(e,t,n,r){return Xu(t,new pu(n,e),r)},Ku=function(e,t,n){return Xu(e,new hu(t),n)};function Xu(e,t,n){let r=e.getPriority().val(),i=nm(r,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=nm(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Yn(a,q(i)):e}else{let s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Yn(i))),s.forEachChild(W,(a,c)=>{let l=Xu(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var si=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function ks(e,t){let n=t instanceof R?t:new R(t),r=e,i=w(n);for(;i!==null;){let o=Ct(r.node.children,i)||{children:{},childCount:0};r=new si(i,r,o),n=U(n),i=w(n)}return r}function cn(e){return e.node.value}function Ju(e,t){e.node.value=t,gu(e)}function ey(e){return e.node.childCount>0}function c0(e){return cn(e)===void 0&&!ey(e)}function Ps(e,t){J(e.node.children,(n,r)=>{t(new si(n,e,r))})}function ty(e,t,n,r){n&&!r&&t(e),Ps(e,i=>{ty(i,t,!0,r)}),n&&r&&t(e)}function l0(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function pi(e){return new R(e.parent===null?e.name:pi(e.parent)+"/"+e.name)}function gu(e){e.parent!==null&&u0(e.parent,e.name,e)}function u0(e,t,n){let r=c0(n),i=Te(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,gu(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,gu(e))}var d0=/[\[\].#$\/\u0000-\u001F\u007F]/,f0=/[\[\].#$\u0000-\u001F\u007F]/,Tl=10*1024*1024,Os=function(e){return typeof e=="string"&&e.length!==0&&!d0.test(e)},ny=function(e){return typeof e=="string"&&e.length!==0&&!f0.test(e)},h0=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ny(e)},ai=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ts(e)||e&&typeof e=="object"&&Te(e,".sv")},st=function(e,t,n,r){r&&t===void 0||gi(he(e,"value"),t,n)},gi=function(e,t,n){let r=n instanceof R?new Vl(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+tn(r));if(typeof t=="function")throw new Error(e+"contains a function "+tn(r)+" with contents = "+t.toString());if(Ts(t))throw new Error(e+"contains "+t.toString()+" "+tn(r));if(typeof t=="string"&&t.length>Tl/3&&ar(t)>Tl)throw new Error(e+"contains a string greater than "+Tl+" utf8 bytes "+tn(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(J(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Os(s)))throw new Error(e+" contains an invalid key ("+s+") "+tn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);UI(r,s),gi(e,a,r),WI(r)}),i&&o)throw new Error(e+' contains ".value" child '+tn(r)+" in addition to actual children.")}},p0=function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];let o=Kr(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Os(o[s]))throw new Error(e+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort($I);let i=null;for(n=0;n<t.length;n++){if(r=t[n],i!==null&&Oe(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},ry=function(e,t,n,r){if(r&&t===void 0)return;let i=he(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];J(t,(s,a)=>{let c=new R(s);if(gi(i,a,G(n,c)),Fu(c)===".priority"&&!ai(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),p0(i,o)},ed=function(e,t,n){if(!(n&&t===void 0)){if(Ts(t))throw new Error(he(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ai(t))throw new Error(he(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},mi=function(e,t,n,r){if(!(r&&n===void 0)&&!Os(n))throw new Error(he(e,t)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ir=function(e,t,n,r){if(!(r&&n===void 0)&&!ny(n))throw new Error(he(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},g0=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ir(e,t,n,r)},De=function(e,t){if(w(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},iy=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Os(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!h0(n))throw new Error(he(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var mu=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Fs(e,t){let n=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();n!==null&&!Lu(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function oy(e,t,n){Fs(e,n),sy(e,r=>Lu(r,t))}function Ee(e,t,n){Fs(e,n),sy(e,r=>Oe(r,t)||Oe(t,r))}function sy(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let i=e.eventLists_[r];if(i){let o=i.path;t(o)?(m0(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function m0(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();rn&&X("event: "+n.toString()),tr(r)}}}var ay="repo_interrupt",y0=25,yu=class{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ls(),this.transactionQueueTree_=new si,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function v0(e,t,n){if(e.stats_=Ou(e.repoInfo_),e.forceRestClient_||vI())e.server_=new Ql(e.repoInfo_,(r,i,o,s)=>{rm(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>im(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Y(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ju(e.repoInfo_,t,(r,i,o,s)=>{rm(e,r,i,o,s)},r=>{im(e,r)},r=>{_0(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=DI(e.repoInfo_,()=>new tu(e.stats_,e.server_)),e.infoData_=new Kl,e.infoSyncTree_=new vs({startListening:(r,i,o,s)=>{let a=[],c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=hi(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),td(e,"connected",!1),e.serverSyncTree_=new vs({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Ee(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function cy(e){let n=e.infoData_.getNode(new R(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yi(e){return o0({timestamp:cy(e)})}function rm(e,t,n,r,i){e.dataUpdateCount++;let o=new R(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){let c=sr(n,l=>q(l));s=Jb(e.serverSyncTree_,o,c,i)}else{let c=q(n);s=Zm(e.serverSyncTree_,o,c,i)}else if(r){let c=sr(n,l=>q(l));s=Qb(e.serverSyncTree_,o,c)}else{let c=q(n);s=hi(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Jn(e,o)),Ee(e.eventQueue_,a,s)}function im(e,t){td(e,"connected",t),t===!1&&w0(e)}function _0(e,t){J(t,(n,r)=>{td(e,n,r)})}function td(e,t,n){let r=new R("/.info/"+t),i=q(n);e.infoData_.updateSnapshot(r,i);let o=hi(e.infoSyncTree_,r,i);Ee(e.eventQueue_,r,o)}function Ls(e){return e.nextWriteId_++}function D0(e,t,n){let r=e0(e.serverSyncTree_,t);return r!=null?Promise.resolve(r):e.server_.get(t).then(i=>{let o=q(i).withIndex(t._queryParams.getIndex());fu(e.serverSyncTree_,t,n,!0);let s;if(t._queryParams.loadsAllData())s=hi(e.serverSyncTree_,t._path,o);else{let a=oi(e.serverSyncTree_,t);s=Zm(e.serverSyncTree_,t._path,o,a)}return Ee(e.eventQueue_,t._path,s),_s(e.serverSyncTree_,t,n,null,!0),o},i=>(or(e,"get for query "+Y(t)+" failed: "+i),Promise.reject(new Error(i))))}function nd(e,t,n,r,i){or(e,"set",{path:t.toString(),value:n,priority:r});let o=yi(e),s=q(n,r),a=As(e.serverSyncTree_,t),c=Ku(s,a,o),l=Ls(e),u=qu(e.serverSyncTree_,t,c,l,!0);Fs(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(f,h)=>{let g=f==="ok";g||oe("set at "+t+" failed: "+f);let y=Rt(e.serverSyncTree_,l,!g);Ee(e.eventQueue_,t,y),jt(e,i,f,h)});let d=id(e,t);Jn(e,d),Ee(e.eventQueue_,d,[])}function E0(e,t,n,r){or(e,"update",{path:t.toString(),value:n});let i=!0,o=yi(e),s={};if(J(n,(a,c)=>{i=!1,s[a]=Jm(G(t,a),q(c),e.serverSyncTree_,o)}),i)X("update() called with empty data.  Don't do anything."),jt(e,r,"ok",void 0);else{let a=Ls(e),c=Zb(e.serverSyncTree_,t,s,a);Fs(e.eventQueue_,c),e.server_.merge(t.toString(),n,(l,u)=>{let d=l==="ok";d||oe("update at "+t+" failed: "+l);let f=Rt(e.serverSyncTree_,a,!d),h=f.length>0?Jn(e,t):t;Ee(e.eventQueue_,h,f),jt(e,r,l,u)}),J(n,l=>{let u=id(e,G(t,l));Jn(e,u)}),Ee(e.eventQueue_,t,[])}}function w0(e){or(e,"onDisconnectEvents");let t=yi(e),n=ls();Jl(e.onDisconnect_,A(),(i,o)=>{let s=Jm(i,o,e.serverSyncTree_,t);nr(n,i,s)});let r=[];Jl(n,A(),(i,o)=>{r=r.concat(hi(e.serverSyncTree_,i,o));let s=id(e,i);Jn(e,s)}),e.onDisconnect_=ls(),Ee(e.eventQueue_,A(),r)}function C0(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{r==="ok"&&Xl(e.onDisconnect_,t),jt(e,n,r,i)})}function om(e,t,n,r){let i=q(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(o,s)=>{o==="ok"&&nr(e.onDisconnect_,t,i),jt(e,r,o,s)})}function I0(e,t,n,r,i){let o=q(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(s,a)=>{s==="ok"&&nr(e.onDisconnect_,t,o),jt(e,i,s,a)})}function b0(e,t,n,r){if(Ci(n)){X("onDisconnect().update() called with empty data.  Don't do anything."),jt(e,r,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),n,(i,o)=>{i==="ok"&&J(n,(s,a)=>{let c=q(a);nr(e.onDisconnect_,G(t,s),c)}),jt(e,r,i,o)})}function T0(e,t,n){let r;w(t._path)===".info"?r=fu(e.infoSyncTree_,t,n):r=fu(e.serverSyncTree_,t,n),oy(e.eventQueue_,t._path,r)}function vu(e,t,n){let r;w(t._path)===".info"?r=_s(e.infoSyncTree_,t,n):r=_s(e.serverSyncTree_,t,n),oy(e.eventQueue_,t._path,r)}function ly(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ay)}function S0(e){e.persistentConnection_&&e.persistentConnection_.resume(ay)}function or(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),X(n,...t)}function jt(e,t,n,r){t&&tr(()=>{if(n==="ok")t(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function M0(e,t,n,r,i,o){or(e,"transaction on "+t);let s={path:t,update:n,onComplete:r,status:null,order:cm(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=rd(e,t,void 0);s.currentInputSnapshot=a;let c=s.update(a.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{gi("transaction failed: Data returned ",c,s.path),s.status=0;let l=ks(e.transactionQueueTree_,t),u=cn(l)||[];u.push(s),Ju(l,u);let d;typeof c=="object"&&c!==null&&Te(c,".priority")?(d=Ct(c,".priority"),p(ai(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(As(e.serverSyncTree_,t)||E.EMPTY_NODE).getPriority().val();let f=yi(e),h=q(c,d),g=Ku(h,a,f);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=g,s.currentWriteId=Ls(e);let y=qu(e.serverSyncTree_,t,g,s.currentWriteId,s.applyLocally);Ee(e.eventQueue_,t,y),js(e,e.transactionQueueTree_)}}function rd(e,t,n){return As(e.serverSyncTree_,t,n)||E.EMPTY_NODE}function js(e,t=e.transactionQueueTree_){if(t||Vs(e,t),cn(t)){let n=dy(e,t);p(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&N0(e,pi(t),n)}else ey(t)&&Ps(t,n=>{js(e,n)})}function N0(e,t,n){let r=n.map(l=>l.currentWriteId),i=rd(e,t,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];p(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=le(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{or(e,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Rt(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Vs(e,ks(e.transactionQueueTree_,t)),js(e,e.transactionQueueTree_),Ee(e.eventQueue_,t,u);for(let f=0;f<d.length;f++)tr(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{oe("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Jn(e,t)}},s)}function Jn(e,t){let n=uy(e,t),r=pi(n),i=dy(e,n);return x0(e,i,r),r}function x0(e,t,n){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],l=le(n,c.path),u=!1,d;if(p(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(Rt(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=y0)u=!0,d="maxretry",i=i.concat(Rt(e.serverSyncTree_,c.currentWriteId,!0));else{let f=rd(e,c.path,s);c.currentInputSnapshot=f;let h=t[a].update(f.val());if(h!==void 0){gi("transaction failed: Data returned ",h,c.path);let g=q(h);typeof h=="object"&&h!=null&&Te(h,".priority")||(g=g.updatePriority(f.getPriority()));let T=c.currentWriteId,k=yi(e),H=Ku(g,f,k);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=H,c.currentWriteId=Ls(e),s.splice(s.indexOf(T),1),i=i.concat(qu(e.serverSyncTree_,c.path,H,c.currentWriteId,c.applyLocally)),i=i.concat(Rt(e.serverSyncTree_,T,!0))}else u=!0,d="nodata",i=i.concat(Rt(e.serverSyncTree_,c.currentWriteId,!0))}Ee(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(d),!1,null))))}Vs(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)tr(r[a]);js(e,e.transactionQueueTree_)}function uy(e,t){let n,r=e.transactionQueueTree_;for(n=w(t);n!==null&&cn(r)===void 0;)r=ks(r,n),t=U(t),n=w(t);return r}function dy(e,t){let n=[];return fy(e,t,n),n.sort((r,i)=>r.order-i.order),n}function fy(e,t,n){let r=cn(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ps(t,i=>{fy(e,i,n)})}function Vs(e,t){let n=cn(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Ju(t,n.length>0?n:void 0)}Ps(t,r=>{Vs(e,r)})}function id(e,t){let n=pi(uy(e,t)),r=ks(e.transactionQueueTree_,t);return l0(r,i=>{Sl(e,i)}),Sl(e,r),ty(r,i=>{Sl(e,i)}),n}function Sl(e,t){let n=cn(t);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(p(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(p(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Rt(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Ju(t,void 0):n.length=o+1,Ee(e.eventQueue_,pi(t),i);for(let s=0;s<r.length;s++)tr(r[s])}}function A0(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function R0(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):oe(`Invalid query segment '${n}' in query '${e}'`)}return t}var _u=function(e,t){let n=k0(e),r=n.namespace;n.domain==="firebase.com"&&it(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&it("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||lI();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ts(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new R(n.pathString)}},k0=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof e=="string"){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=A0(e.substring(u,d)));let f=R0(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(t.substring(l+1),10)):l=t.length;let h=t.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let g=t.indexOf(".");r=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var sm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",P0=function(){let e=0,t=[];return function(n){let r=n===e;e=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=sm.charAt(n%64),n=Math.floor(n/64);p(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=sm.charAt(t[i]);return p(s.length===20,"nextPushId: Length should be 20."),s}}();var Ds=class{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Y(this.snapshot.exportVal())}},Es=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var ci=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return p(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var ws=class{constructor(t,n){this._repo=t,this._path=n}cancel(){let t=new K;return C0(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){De("OnDisconnect.remove",this._path);let t=new K;return om(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){De("OnDisconnect.set",this._path),st("OnDisconnect.set",t,this._path,!1);let n=new K;return om(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}setWithPriority(t,n){De("OnDisconnect.setWithPriority",this._path),st("OnDisconnect.setWithPriority",t,this._path,!1),ed("OnDisconnect.setWithPriority",n,!1);let r=new K;return I0(this._repo,this._path,t,n,r.wrapCallback(()=>{})),r.promise}update(t){De("OnDisconnect.update",this._path),ry("OnDisconnect.update",t,this._path,!1);let n=new K;return b0(this._repo,this._path,t,n.wrapCallback(()=>{})),n.promise}};var de=class e{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return C(this._path)?null:Fu(this._path)}get ref(){return new we(this._repo,this._path)}get _queryIdentifier(){let t=Gg(this._queryParams),n=Pu(t);return n==="{}"?"default":n}get _queryObject(){return Gg(this._queryParams)}isEqual(t){if(t=se(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Lu(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+HI(this._path)}};function Bs(e,t){if(e._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Bt(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===rt){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ot)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Et)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(e.getIndex()===W){if(t!=null&&!ai(t)||n!=null&&!ai(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(p(e.getIndex()instanceof Xr||e.getIndex()===Bu,"unknown index type."),t!=null&&typeof t=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Hs(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var we=class e extends de{constructor(t,n){super(t,n,new ni,!1)}get parent(){let t=Nm(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},er=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new R(t),r=Vt(this.ref,t);return new e(this._node.getChild(n),r,W)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new e(i,Vt(this.ref,r),W)))}hasChild(t){let n=new R(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function od(e,t){return e=se(e),e._checkNotDeleted("ref"),t!==void 0?Vt(e._root,t):e._root}function sd(e,t){e=se(e),e._checkNotDeleted("refFromURL");let n=_u(t,e._repo.repoInfo_.nodeAdmin);iy("refFromURL",n);let r=n.repoInfo;return!e._repo.repoInfo_.isCustomHost()&&r.host!==e._repo.repoInfo_.host&&it("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),od(e,n.path.toString())}function Vt(e,t){return e=se(e),w(e._path)===null?g0("child","path",t,!1):ir("child","path",t,!1),new we(e._repo,G(e._path,t))}function hy(e,t){e=se(e),De("push",e._path),st("push",t,e._path,!0);let n=cy(e._repo),r=P0(n),i=Vt(e,r),o=Vt(e,r),s;return t!=null?s=$s(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function py(e){return De("remove",e._path),$s(e,null)}function $s(e,t){e=se(e),De("set",e._path),st("set",t,e._path,!1);let n=new K;return nd(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function gy(e,t){e=se(e),De("setPriority",e._path),ed("setPriority",t,!1);let n=new K;return nd(e._repo,G(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}function my(e,t,n){if(De("setWithPriority",e._path),st("setWithPriority",t,e._path,!1),ed("setWithPriority",n,!1),e.key===".length"||e.key===".keys")throw"setWithPriority failed: "+e.key+" is a read-only object.";let r=new K;return nd(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}function yy(e,t){ry("update",t,e._path,!1);let n=new K;return E0(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function vy(e){e=se(e);let t=new ci(()=>{}),n=new li(t);return D0(e._repo,e,n).then(r=>new er(r,new we(e._repo,e._path),e._queryParams.getIndex()))}var li=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Ds("value",this,new er(t.snapshotNode,new we(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Es(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Cs=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new Es(this,t,n):null}createEvent(t,n){p(t.childName!=null,"Child events should have a childName.");let r=Vt(new we(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new Ds(t.type,this,new er(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function vi(e,t,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{vu(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new ci(n,o||void 0),a=t==="value"?new li(s):new Cs(t,s);return T0(e._repo,e,a),()=>vu(e._repo,e,a)}function Us(e,t,n,r){return vi(e,"value",t,n,r)}function ad(e,t,n,r){return vi(e,"child_added",t,n,r)}function cd(e,t,n,r){return vi(e,"child_changed",t,n,r)}function ld(e,t,n,r){return vi(e,"child_moved",t,n,r)}function ud(e,t,n,r){return vi(e,"child_removed",t,n,r)}function dd(e,t,n){let r=null,i=n?new ci(n):null;t==="value"?r=new li(i):t&&(r=new Cs(t,i)),vu(e._repo,e,r)}var Ce=class{},Is=class extends Ce{constructor(t,n){super(),this._value=t,this._key=n,this.type="endAt"}_apply(t){st("endAt",this._value,t._path,!0);let n=Zl(t._queryParams,this._value,this._key);if(Hs(n),Bt(n),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new de(t._repo,t._path,n,t._orderByCalled)}};function _y(e,t){return mi("endAt","key",t,!0),new Is(e,t)}var Du=class extends Ce{constructor(t,n){super(),this._value=t,this._key=n,this.type="endBefore"}_apply(t){st("endBefore",this._value,t._path,!1);let n=sb(t._queryParams,this._value,this._key);if(Hs(n),Bt(n),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new de(t._repo,t._path,n,t._orderByCalled)}};function Dy(e,t){return mi("endBefore","key",t,!0),new Du(e,t)}var bs=class extends Ce{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAt"}_apply(t){st("startAt",this._value,t._path,!0);let n=Yl(t._queryParams,this._value,this._key);if(Hs(n),Bt(n),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new de(t._repo,t._path,n,t._orderByCalled)}};function Ey(e=null,t){return mi("startAt","key",t,!0),new bs(e,t)}var Eu=class extends Ce{constructor(t,n){super(),this._value=t,this._key=n,this.type="startAfter"}_apply(t){st("startAfter",this._value,t._path,!1);let n=ob(t._queryParams,this._value,this._key);if(Hs(n),Bt(n),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new de(t._repo,t._path,n,t._orderByCalled)}};function wy(e,t){return mi("startAfter","key",t,!0),new Eu(e,t)}var wu=class extends Ce{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new de(t._repo,t._path,rb(t._queryParams,this._limit),t._orderByCalled)}};function Cy(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wu(e)}var Cu=class extends Ce{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new de(t._repo,t._path,ib(t._queryParams,this._limit),t._orderByCalled)}};function Iy(e){if(typeof e!="number"||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Cu(e)}var Iu=class extends Ce{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){Bs(t,"orderByChild");let n=new R(this._path);if(C(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Xr(n),i=Ss(t._queryParams,r);return Bt(i),new de(t._repo,t._path,i,!0)}};function by(e){if(e==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(e==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(e==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ir("orderByChild","path",e,!1),new Iu(e)}var bu=class extends Ce{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){Bs(t,"orderByKey");let n=Ss(t._queryParams,rt);return Bt(n),new de(t._repo,t._path,n,!0)}};function Ty(){return new bu}var Tu=class extends Ce{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){Bs(t,"orderByPriority");let n=Ss(t._queryParams,W);return Bt(n),new de(t._repo,t._path,n,!0)}};function Sy(){return new Tu}var Su=class extends Ce{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){Bs(t,"orderByValue");let n=Ss(t._queryParams,Bu);return Bt(n),new de(t._repo,t._path,n,!0)}};function My(){return new Su}var Mu=class extends Ce{constructor(t,n){super(),this._value=t,this._key=n,this.type="equalTo"}_apply(t){if(st("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Is(this._value,this._key)._apply(new bs(this._value,this._key)._apply(t))}};function Ny(e,t){return mi("equalTo","key",t,!0),new Mu(e,t)}function Le(e,...t){let n=se(e);for(let r of t)n=r._apply(n);return n}Hb(we);Gb(we);var O0="FIREBASE_DATABASE_EMULATOR_HOST",Nu={},F0=!1;function L0(e,t,n,r){e.repoInfo_=new ts(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function fd(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||it("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),X("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=_u(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[O0]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=_u(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Gr(Gr.OWNER):new kl(e.name,e.options,t);iy("Invalid Firebase Database URL",s),C(s.path)||it("Database URL must point to the root of a Firebase Database (not including a child path).");let d=V0(a,e,u,new Rl(e.name,n));return new xu(d,e)}function j0(e,t){let n=Nu[t];(!n||n[e.key]!==e)&&it(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ly(e),delete n[e.key]}function V0(e,t,n,r){let i=Nu[t.name];i||(i={},Nu[t.name]=i);let o=i[e.toURLString()];return o&&it("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new yu(e,F0,n,r),i[e.toURLString()]=o,o}var xu=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(v0(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new we(this._repo,A())),this._rootInternal}_delete(){return this._rootInternal!==null&&(j0(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&it("Cannot call "+t+" on a deleted database.")}};function xy(){Mm.IS_TRANSPORT_INITIALIZED&&oe("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ay(){xy(),Qr.forceDisallow()}function Ry(){xy(),Wn.forceDisallow(),Qr.forceAllow()}function ky(e,t,n,r={}){e=se(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&it("Cannot call useEmulator() after instance has already been initialized.");let i=e._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&it('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Gr(Gr.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Ed(r.mockUserToken,e.app.options.projectId);o=new Gr(s)}L0(i,t,n,o)}function Py(e){e=se(e),e._checkNotDeleted("goOffline"),ly(e._repo)}function Oy(e){e=se(e),e._checkNotDeleted("goOnline"),S0(e._repo)}function Fy(e,t){um(e,t)}function B0(e){ku(Ad),cr(new at("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return fd(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),It(Ng,xg,e),It(Ng,xg,"esm2017")}var H0={".sv":"timestamp"};function Ly(){return H0}function jy(e){return{".sv":{increment:e}}}var Au=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Vy(e,t,n){var r;if(e=se(e),De("Reference.transaction",e._path),e.key===".length"||e.key===".keys")throw"Reference.transaction failed: "+e.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,o=new K,s=(c,l,u)=>{let d=null;c?o.reject(c):(d=new er(u,new we(e._repo,e._path),W),o.resolve(new Au(l,d)))},a=Us(e,()=>{});return M0(e._repo,e._path,t,s,a,i),o.promise}ju.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};ju.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};B0();var $0="@firebase/database-compat",U0="1.0.8";var W0=new hn("@firebase/database-compat"),By=function(e){let t="FIREBASE WARNING: "+e;W0.warn(t)};var z0=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(he(e,t)+"must be a boolean.")},G0=function(e,t,n){if(!(n&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(he(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var hd=class{constructor(t){this._delegate=t}cancel(t){v("OnDisconnect.cancel",0,1,arguments.length),Z("OnDisconnect.cancel","onComplete",t,!0);let n=this._delegate.cancel();return t&&n.then(()=>t(null),r=>t(r)),n}remove(t){v("OnDisconnect.remove",0,1,arguments.length),Z("OnDisconnect.remove","onComplete",t,!0);let n=this._delegate.remove();return t&&n.then(()=>t(null),r=>t(r)),n}set(t,n){v("OnDisconnect.set",1,2,arguments.length),Z("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){v("OnDisconnect.setWithPriority",2,3,arguments.length),Z("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(t,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(t,n){if(v("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,By("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Z("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(t);return n&&r.then(()=>n(null),i=>n(i)),r}};var pd=class{constructor(t,n){this.committed=t,this.snapshot=n}toJSON(){return v("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var ln=class e{constructor(t,n){this._database=t,this._delegate=n}val(){return v("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return v("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return v("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return v("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return v("DataSnapshot.child",0,1,arguments.length),t=String(t),ir("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}hasChild(t){return v("DataSnapshot.hasChild",1,1,arguments.length),ir("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return v("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return v("DataSnapshot.forEach",1,1,arguments.length),Z("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(n=>t(new e(this._database,n)))}hasChildren(){return v("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return v("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return v("DataSnapshot.ref",0,0,arguments.length),new wt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Ws=class e{constructor(t,n){this.database=t,this._delegate=n}on(t,n,r,i){var o;v("Query.on",2,4,arguments.length),Z("Query.on","callback",n,!1);let s=e.getCancelAndContextArgs_("Query.on",r,i),a=(l,u)=>{n.call(s.context,new ln(this.database,l),u)};a.userCallback=n,a.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(t){case"value":return Us(this._delegate,a,c),n;case"child_added":return ad(this._delegate,a,c),n;case"child_removed":return ud(this._delegate,a,c),n;case"child_changed":return cd(this._delegate,a,c),n;case"child_moved":return ld(this._delegate,a,c),n;default:throw new Error(he("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,n,r){if(v("Query.off",0,3,arguments.length),G0("Query.off",t,!0),Z("Query.off","callback",n,!0),Ks("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,dd(this._delegate,t,i)}else dd(this._delegate,t)}get(){return vy(this._delegate).then(t=>new ln(this.database,t))}once(t,n,r,i){v("Query.once",1,4,arguments.length),Z("Query.once","callback",n,!0);let o=e.getCancelAndContextArgs_("Query.once",r,i),s=new K,a=(l,u)=>{let d=new ln(this.database,l);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(t){case"value":Us(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":ad(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":ud(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":cd(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":ld(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(he("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(t){return v("Query.limitToFirst",1,1,arguments.length),new e(this.database,Le(this._delegate,Cy(t)))}limitToLast(t){return v("Query.limitToLast",1,1,arguments.length),new e(this.database,Le(this._delegate,Iy(t)))}orderByChild(t){return v("Query.orderByChild",1,1,arguments.length),new e(this.database,Le(this._delegate,by(t)))}orderByKey(){return v("Query.orderByKey",0,0,arguments.length),new e(this.database,Le(this._delegate,Ty()))}orderByPriority(){return v("Query.orderByPriority",0,0,arguments.length),new e(this.database,Le(this._delegate,Sy()))}orderByValue(){return v("Query.orderByValue",0,0,arguments.length),new e(this.database,Le(this._delegate,My()))}startAt(t=null,n){return v("Query.startAt",0,2,arguments.length),new e(this.database,Le(this._delegate,Ey(t,n)))}startAfter(t=null,n){return v("Query.startAfter",0,2,arguments.length),new e(this.database,Le(this._delegate,wy(t,n)))}endAt(t=null,n){return v("Query.endAt",0,2,arguments.length),new e(this.database,Le(this._delegate,_y(t,n)))}endBefore(t=null,n){return v("Query.endBefore",0,2,arguments.length),new e(this.database,Le(this._delegate,Dy(t,n)))}equalTo(t,n){return v("Query.equalTo",1,2,arguments.length),new e(this.database,Le(this._delegate,Ny(t,n)))}toString(){return v("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return v("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(v("Query.isEqual",1,1,arguments.length),!(t instanceof e)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,Z(t,"cancel",i.cancel,!0),i.context=r,Ks(t,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(he(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new wt(this.database,new we(this._delegate._repo,this._delegate._path))}},wt=class e extends Ws{constructor(t,n){super(t,new de(n._repo,n._path,new ni,!1)),this.database=t,this._delegate=n}getKey(){return v("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return v("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new e(this.database,Vt(this._delegate,t))}getParent(){v("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new e(this.database,t):null}getRoot(){return v("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)}set(t,n){v("Reference.set",1,2,arguments.length),Z("Reference.set","onComplete",n,!0);let r=$s(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}update(t,n){if(v("Reference.update",1,2,arguments.length),Array.isArray(t)){let i={};for(let o=0;o<t.length;++o)i[""+o]=t[o];t=i,By("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}De("Reference.update",this._delegate._path),Z("Reference.update","onComplete",n,!0);let r=yy(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(t,n,r){v("Reference.setWithPriority",2,3,arguments.length),Z("Reference.setWithPriority","onComplete",r,!0);let i=my(this._delegate,t,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(t){v("Reference.remove",0,1,arguments.length),Z("Reference.remove","onComplete",t,!0);let n=py(this._delegate);return t&&n.then(()=>t(null),r=>t(r)),n}transaction(t,n,r){v("Reference.transaction",1,3,arguments.length),Z("Reference.transaction","transactionUpdate",t,!1),Z("Reference.transaction","onComplete",n,!0),z0("Reference.transaction","applyLocally",r,!0);let i=Vy(this._delegate,t,{applyLocally:r}).then(o=>new pd(o.committed,new ln(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(t,n){v("Reference.setPriority",1,2,arguments.length),Z("Reference.setPriority","onComplete",n,!0);let r=gy(this._delegate,t);return n&&r.then(()=>n(null),i=>n(i)),r}push(t,n){v("Reference.push",0,2,arguments.length),Z("Reference.push","onComplete",n,!0);let r=hy(this._delegate,t),i=r.then(s=>new e(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new e(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return De("Reference.onDisconnect",this._delegate._path),new hd(new ws(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var un=class{constructor(t,n){this._delegate=t,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ay,forceLongPolling:Ry}}useEmulator(t,n,r={}){ky(this._delegate,t,n,r)}ref(t){if(v("database.ref",0,1,arguments.length),t instanceof wt){let n=sd(this._delegate,t.toString());return new wt(this,n)}else{let n=od(this._delegate,t);return new wt(this,n)}}refFromURL(t){v("database.refFromURL",1,1,arguments.length);let r=sd(this._delegate,t);return new wt(this,r)}goOffline(){return v("database.goOffline",0,0,arguments.length),Py(this._delegate)}goOnline(){return v("database.goOnline",0,0,arguments.length),Oy(this._delegate)}};un.ServerValue={TIMESTAMP:Ly(),increment:e=>jy(e)};function q0({app:e,url:t,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){ku(n);let a=new Xs("database-standalone"),c=new Ii("auth-internal",a);c.setComponent(new at("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new Ii("app-check-internal",a),l.setComponent(new at("app-check-internal",()=>i,"PRIVATE"))),{instance:new un(fd(e,c,l,t,s),e),namespace:o}}var Y0=Object.freeze({__proto__:null,initStandalone:q0});var Z0=un.ServerValue;function Q0(e){e.INTERNAL.registerComponent(new at("database-compat",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:n});return new un(i,r)},"PUBLIC").setServiceProps({Reference:wt,Query:Ws,Database:un,DataSnapshot:ln,enableLogging:Fy,INTERNAL:Y0,ServerValue:Z0}).setMultipleInstances(!0)),e.registerVersion($0,U0)}Q0(pe);function _i(e,t,n="on",r=hr){return new z(i=>{let o=null;return o=e[n](t,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&e.off(t,o)}}:{unsubscribe(){}}}).pipe(ie(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:t,payload:o,prevKey:s,key:a}}),gr())}function K0(e){return typeof e=="string"}function X0(e){return typeof e.exportVal=="function"}function zy(e){return e==null}function Gy(e){return typeof e.set=="function"}function Hy(e,t){return Gy(t)?t:e.ref(t)}function qy(e,t){if(K0(e))return t.stringCase();if(Gy(e))return t.firebaseCase();if(X0(e))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof e}`)}function Yy(e){return(zy(e)||e.length===0)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function Zy(e,t,n){t=Yy(t);let r=t.map(i=>_i(e,i,"on",n));return En(...r)}function J0(e,t,n){let r=Zy(e,t).pipe(Yi((i,o)=>[...i,o],[]));return tT(e,r,n)}function eT(e,t){return _i(e,"value","on",t).pipe(ie(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function tT(e,t,n){return eT(e,n).pipe(Ea(t),ie(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),_a(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),ie(i=>i.actions))}function $y(e,t){return function(r,i){return qy(r,{stringCase:()=>e.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function nT(e){return function(n){return n?qy(n,{stringCase:()=>e.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):e.remove()}}function rT(e,t,n){return _i(e,"value","once",n).pipe(ve(r=>{let i=[Tt(r)];return t.forEach(o=>i.push(_i(e,o,"on",n))),En(...i).pipe(Yi(oT,[]))}),ya())}function Qy(e,t){let n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function iT(e,t){if(zy(t))return 0;{let n=Qy(e,t);return n===-1?e.length:n+1}}function oT(e,t){let{payload:n,prevKey:r,key:i}=t,o=Qy(e,i),s=iT(e,r);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,e=[...e,l],!1})}return e;case"child_added":if(o>-1)(e[o-1]?.key||null)!==r&&(e=e.filter(c=>c.payload.key!==n.key),e.splice(s,0,t));else{if(r==null)return[t,...e];e=e.slice(),e.splice(s,0,t)}return e;case"child_removed":return e.filter(a=>a.payload.key!==n.key);case"child_changed":return e.map(a=>a.payload.key===i?t:a);case"child_moved":if(o>-1){let a=e.splice(o,1)[0];return e=e.slice(),e.splice(s,0,a),e}return e;default:return e}}function Uy(e,t,n){return t=Yy(t),rT(e,t,n)}function sT(e,t){let n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:$y(r,"update"),set:$y(r,"set"),push:i=>r.push(i),remove:nT(r),snapshotChanges(i){return Uy(e,i,n).pipe(Dt)},stateChanges(i){return Zy(e,i,n).pipe(Dt)},auditTrail(i){return J0(e,i,n).pipe(Dt)},valueChanges(i,o){return Uy(e,i,n).pipe(ie(a=>a.map(c=>o&&o.idField?be(fe({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),Dt)}}}function Wy(e,t){return function(){return _i(e,"value","on",t)}}function aT(e,t){return{query:e,snapshotChanges(){return Wy(e,t.schedulers.outsideAngular)().pipe(Dt)},update(n){return e.ref.update(n)},set(n){return e.ref.set(n)},remove(){return e.ref.remove()},valueChanges(){return Wy(e,t.schedulers.outsideAngular)().pipe(Dt,ie(r=>r.payload.exists()?r.payload.val():null))}}}var cT=new _("angularfire2.realtimeDatabaseURL"),lT=new _("angularfire2.database.use-emulator"),gd=(()=>{class e{schedulers;database;constructor(n,r,i,o,s,a,c,l,u,d,f,h,g,y,T){this.schedulers=a;let k=c,H=Vr(n,s,r);l&&Dl(H,s,u,f,h,g,d,y),this.database=Ko(`${H.name}.database.${i}`,"AngularFireDatabase",H.name,()=>{let B=s.runOutsideAngular(()=>H.database(i||void 0));return k&&B.useEmulator(...k),B},[k])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>Hy(this.database,n)),o=i;return r&&(o=r(i)),sT(o,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>Hy(this.database,n));return aT(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||e)(m(Hn),m($n,8),m(cT,8),m(Pe),m(P),m(Zo),m(lT,8),m(Mg,8),m(pl,8),m(gl,8),m(ml,8),m(yl,8),m(vl,8),m(_l,8),m(en,8))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),Ky=(()=>{class e{constructor(){pe.registerVersion("angularfire",Bn.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||e)};static \u0275mod=ke({type:e});static \u0275inj=Re({providers:[gd]})}return e})();var Xy={production:!1,firebaseConfig:{apiKey:"AIzaSyCS0Zo5AaXYY_qyMSRPXHgXOOV4ukhM5SE",authDomain:"dr-usama-clinic-screens.firebaseapp.com",databaseURL:"https://dr-usama-clinic-screens-default-rtdb.firebaseio.com",projectId:"dr-usama-clinic-screens",storageBucket:"dr-usama-clinic-screens.appspot.com",messagingSenderId:"659787863841",appId:"1:659787863841:web:a2c01e3ee51ca588359060"}};var zs=class e{constructor(t){this.db=t}getClinicData(){return this.db.object("/clinicUpdates").valueChanges()}static \u0275fac=function(n){return new(n||e)(m(gd))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};function hT(e,t){if(e&1&&(te(0,"div",12)(1,"h1"),ye(2),ne(),te(3,"p"),ye(4,"\u064A\u0631\u062C\u0649 \u0627\u0644\u062C\u0644\u0648\u0633\u060C \u062F\u0648\u0631\u0643 \u0642\u0627\u062F\u0645 \u0642\u0631\u064A\u0628\u064B\u0627!"),ne()()),e&2){let n=Uc();Ln(2),kr("\u0627\u0644\u0645\u0631\u064A\u0636 \u0627\u0644\u062A\u0627\u0644\u064A: ",n.nextPatient,"")}}function pT(e,t){if(e&1&&(te(0,"div",13)(1,"h1"),ye(2,"\u0627\u0644\u0639\u064A\u0627\u062F\u0629 \u0645\u063A\u0644\u0642\u0629 \u062D\u0627\u0644\u064A\u0627\u064B"),ne(),te(3,"p"),ye(4),ne()()),e&2){let n=Uc();Ln(4),kr("\u0633\u0627\u0639\u0627\u062A \u0627\u0644\u0639\u0645\u0644: ",n.clinicHours,"")}}var Gs=class e{constructor(t){this.firebaseService=t}nextPatient="";announcement="";isClinicOpen=!0;clinicHours="9 AM - 5 PM";ngOnInit(){console.log("Initializing KioskComponent..."),this.firebaseService.getClinicData().subscribe(t=>{console.log("Received data from Firebase:",t),t&&(this.nextPatient=t.nextPatient||"",this.announcement=t.announcement||"",this.isClinicOpen=t.isClinicOpen!==void 0?t.isClinicOpen:!0)})}static \u0275fac=function(n){return new(n||e)(jn(zs))};static \u0275cmp=So({type:e,selectors:[["app-kiosk"]],decls:32,vars:4,consts:[["closedTemplate",""],[1,"kiosk-container"],[1,"welcome-banner"],["class","patient-info",4,"ngIf","ngIfElse"],[1,"announcement-section"],[1,"contact-panel"],[1,"operating-hours"],[1,"reservation-info"],[1,"social-media"],[1,"qr-code"],["src","assets/qr-code-placeholder.png","alt","\u0631\u0645\u0632 \u0627\u0644\u0627\u0633\u062A\u062C\u0627\u0628\u0629 \u0627\u0644\u0633\u0631\u064A\u0639\u0629 \u0644\u0648\u0633\u0627\u0626\u0644 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A"],[1,"footer"],[1,"patient-info"],[1,"closed-info"]],template:function(n,r){if(n&1&&(te(0,"div",1)(1,"div",2)(2,"h2"),ye(3,"\u0623\u0647\u0644\u0627\u064B \u0628\u0643\u0645 \u0641\u064A \u0639\u064A\u0627\u062F\u0629 \u062F. \u0623\u0633\u0627\u0645\u0629 \u0639\u0628\u062F \u0627\u0644\u0648\u0647\u0627\u0628 \u0644\u0644\u0623\u0637\u0641\u0627\u0644"),ne()(),Hc(4,hT,5,1,"div",3)(5,pT,5,1,"ng-template",null,0,Vp),te(7,"div",4)(8,"h3"),ye(9,"\u0625\u0639\u0644\u0627\u0646:"),ne(),te(10,"p"),ye(11),ne()(),te(12,"div",5)(13,"div",6)(14,"h4"),ye(15,"\u0633\u0627\u0639\u0627\u062A \u0627\u0644\u0639\u0645\u0644:"),ne(),te(16,"p"),ye(17),ne()(),te(18,"div",7)(19,"h4"),ye(20,"\u0631\u0642\u0645 \u0627\u0644\u062D\u062C\u0632:"),ne(),te(21,"p"),ye(22,"123-456789"),ne()(),te(23,"div",8)(24,"h4"),ye(25,"\u062A\u0627\u0628\u0639\u0648\u0646\u0627 \u0639\u0644\u0649 \u0648\u0633\u0627\u0626\u0644 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A:"),ne(),te(26,"div",9),Rr(27,"img",10),ne()()(),te(28,"div",11)(29,"p")(30,"i"),ye(31,"\u0635\u062D\u0629 \u0637\u0641\u0644\u0643 \u0647\u064A \u0623\u0648\u0644\u0648\u064A\u062A\u0646\u0627 \u0627\u0644\u0642\u0635\u0648\u0649!"),ne()()()()),n&2){let i=jp(6);Ln(4),$c("ngIf",r.isClinicOpen!==void 0&&r.isClinicOpen)("ngIfElse",i),Ln(7),Bo(r.announcement),Ln(6),Bo(r.clinicHours)}},dependencies:[eg],styles:[`@import url('https://fonts.googleapis.com/css2?family=Dubai:wght@400;700&display=swap');
  
    .kiosk-container[_ngcontent-%COMP%] {
      font-family: 'Dubai', sans-serif;
      background-color: #f4f4f9;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.1);
      max-width: 1024px;
      margin: auto;
      direction: rtl;
    }
  
    .welcome-banner[_ngcontent-%COMP%] {
      background-color: #6ab04c;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      color: #fff;
      font-weight: bold;
    }
  
    .patient-info[_ngcontent-%COMP%], .closed-info[_ngcontent-%COMP%] {
      margin: 20px 0;
      padding: 25px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
      color: #333;
    }
  
    .announcement-section[_ngcontent-%COMP%] {
      background-color: #f9ca24;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      color: #444;
      font-weight: bold;
      text-align: center;
    }
  
    .contact-panel[_ngcontent-%COMP%] {
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
  
    .operating-hours[_ngcontent-%COMP%], .reservation-info[_ngcontent-%COMP%], .social-media[_ngcontent-%COMP%] {
      background-color: #f0f0f0;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      text-align: center;
      width: 30%;
      min-width: 200px;
    }
  
    .qr-code[_ngcontent-%COMP%] {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }
  
    .qr-code[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {
      width: 120px;
      height: 120px;
    }
  
    .footer[_ngcontent-%COMP%] {
      text-align: center;
      margin-top: 30px;
      font-style: italic;
      color: #666;
      background-color: #e0e0e0;
      padding: 10px;
      border-radius: 10px;
    }`]})};var qs=class e{title="clinic-kiosk-app";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=So({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&Rr(0,"app-kiosk")},dependencies:[Gs]})};var Ys=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=ke({type:e,bootstrap:[qs]});static \u0275inj=Re({imports:[dg,gg.initializeApp(Xy.firebaseConfig),Ky]})};ug().bootstrapModule(Ys).catch(e=>console.error(e));
